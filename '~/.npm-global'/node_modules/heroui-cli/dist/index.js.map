{"version":3,"sources":["../src/index.ts","../src/helpers/actions/add/heroui-chat/add-hero-chat-codebase.ts","../src/helpers/detect.ts","../src/constants/path.ts","../src/prompts/index.ts","../src/helpers/logger.ts","../src/helpers/exec.ts","../src/helpers/utils.ts","../src/helpers/output-info.ts","../src/constants/box.ts","../src/scripts/cache/cache.ts","../src/scripts/helpers.ts","../src/scripts/path.ts","../src/helpers/beta.ts","../src/constants/required.ts","../src/helpers/package.ts","../src/constants/store.ts","../src/constants/component.ts","../src/prompts/clack.ts","../src/helpers/actions/add/heroui-chat/get-base-storage-url.ts","../src/helpers/fetch.ts","../src/helpers/actions/add/heroui-chat/get-codebase-files.ts","../src/helpers/actions/add/heroui-chat/get-related-imports.ts","../src/helpers/match.ts","../src/helpers/actions/add/heroui-chat/write-files.ts","../src/helpers/math-diff.ts","../package.json","../src/actions/add-action.ts","../src/helpers/check.ts","../src/helpers/actions/add/get-peer-pakcage-version.ts","../src/helpers/upgrade.ts","../src/helpers/condition-value.ts","../src/helpers/actions/upgrade/get-libs-data.ts","../src/helpers/debug.ts","../src/helpers/actions/upgrade/catch-pnpm-exec.ts","../src/helpers/fix.ts","../src/constants/templates.ts","../src/actions/doctor-action.ts","../src/actions/env-action.ts","../src/actions/init-action.ts","../src/helpers/actions/init/change-npmrc.ts","../src/helpers/init.ts","../src/actions/list-action.ts","../src/actions/remove-action.ts","../src/helpers/remove.ts","../src/actions/upgrade-action.ts","../src/helpers/setup.ts"],"names":["chalk","Command","fs","join","p","resolve","findUp","path","fileURLToPath","ROOT","resolver","COMPONENTS_PATH","prompts","_gradientString","defaultColors","gradientString","logPrefix","Logger","args","item","content","options","type","lines","i","defaultPromptOptions","getAutocompleteMultiselect","message","choices","getSelect","getMultiselect","AGENTS","LOCKS","detect","cwd","agent","lockPath","execSync","compareVersions","fg","boxRound","existsSync","mkdirSync","readFileSync","unlinkSync","writeFileSync","exec","retry","InternalCompareVersions","validate","ora","oraPromise","version1","version2","updateComponents","autoUpdateComponents","components","currentVersion","betaVersion","latestVersion","getStore","latestBetaVersion","getComponents","error","oraExecCmd","cmd","text","spinner","result","stdout","getLatestVersion","packageName","store","getPackageVersion","getUnpkgUrl","version","url","betaComponents","downloadFile","getStoreSync","filterMissingComponents","component","c","componentsJson","log","data","bail","isGithubAction","PROD_DIR","PROD","CACHE_DIR","CACHE_PATH","cacheTTL","noCache","initCache","_noCache","getCacheData","cacheData","packageData","now","expiredDate","ttl","n","isExpired","pkgData","pkgVersion","getCacheExecData","key","execMessage","getBetaVersionData","getPrefixComponent","getBetaVersion","componentName","getBetaComponents","getPackageInfo","packagePath","transformVersion","pkg","devDependencies","dependencies","allDependencies","allDependenciesKeys","currentComponents","versionMode","getVersionAndMode","isAllComponents","HERO_UI","transformComponentsToPackage","transformPackageDetail","docs","description","detailPackageInfo","HEROUI_CLI","FRAMER_MOTION","TAILWINDCSS","THEME_UI","SYSTEM_UI","HEROUI_PREFIX","DOCS_INSTALLED","DOCS_TAILWINDCSS_SETUP","DOCS_PNPM_SETUP","DOCS_PROVIDER_SETUP","tailwindRequired","isTypescript","individualTailwindRequired","isPnpm","walkDeps","walkDepComponents","outputComponents","acc","appRequired","pnpmRequired","heroUIComponent","componentPath","pnpmDir","file","getHerouiComponentsData","heroUIComponents","heroUIComponentsKeys","heroUIcomponentsPackages","heroUIComponentsKeysSet","heroUIComponentsMap","heroUIComponentsPackageMap","initStoreComponentsData","beta","orderHeroUIComponentKeys","colorHeroUIComponentKeys","getConditionComponentData","colorMatchRegex","rounded","space","padStart","padEnd","versionRegex","newVersionRegex","commandName","warnError","componentKeyLengthMap","str","newVersion","value","strip","generateComponentOutputVersion","transformComponentsOutput","outputData","fillAnsiLength","boxHeader","boxHeaderSec","boxHeaderTrd","PasCalCase","boxFooter","outputInfo","outputBox","align","borderStyle","center","color","padding","title","mergedRounded","contentArr","transformArr","isPadding","paddingLength","mergedPadding","maxLength","cur","clearColorTitle","titleLength","titleHeaderLength","spaceLen","boxHeaderContent","spaceFir","spaceSec","padFir","padSec","boxContent","transformCur","spaceLength","pad","endLen","versionModeRegex","getCommandDescAndLog","desc","s","findFiles","glob","transformOption","omit","obj","keys","getColorVersion","transformPeerVersion","isMajorUpdate","isMinorUpdate","isPatchUpdate","currentVersionArr","latestVersionArr","getPackageManagerInfo","packageManager","isLatest","r","range","a","b","length","stripStr","fillSpace","execCache","commonExecOptions","reject","cache","logCmd","output","readdirSync","statSync","_spinner","cancel","confirm","isCancel","multiselect","select","cancelClack","textClack","opts","selectClack","taskClack","failText","successText","task","confirmClack","getDirectoryClack","dir","ignore","getBaseStorageUrl","httpMatch","baseUrl","userId","chatId","sandboxId","chatTitle","basename","Readable","pipeline","tar","fetchTarStream","res","downloadTemplate","root","fetchRequest","fetchInfo","throwError","rest","response","getCodeBaseFiles","getMatchImport","importRegexAll","matchAll","matchImport","itemImport","importRegex","match","removeQuote","getMatchArray","target","mixinReg","replaceMatchArray","_replaceValue","replaceValue","v","_value","targetArray","contentIndex","moduleIndex","insertIndex","getRelatedImports","fileContent","imports","fetchAllRelatedFiles","params","entries","filePath","fetchRelatedImports","relatedImports","relatedPath","targetFile","suffix","fileName","writeFilesWithMkdir","directory","httpRegex","APP_FILE","isAddingHeroChatCodebase","targets","addHeroChatCodebase","baseStorageUrl","chatTitleFile","codeFiles","appFile","pkgContent","relatedFiles","relatedFile","pkgContentJson","missingDependencies","isAddMissingDependencies","currentPkgManager","installCmd","matchTextScore","pattern","score","textLength","patternLength","j","findMostMatchText","list","maxScore","printMostMatchText","mathOption","package_default","getPeerPackageVersion","peerPackageName","isMinVersion","filerTargetPackages","min","getConditionVersion","getLibsData","allLibs","dependency","lib","conditionVersion","DEFAULT_SPACE","MISSING","upgrade","all","isHeroUIAll","upgradeOptionList","missingDepSet","allOutputData","getAllOutputData","libsData","transformUpgradeOptionList","upgradePeerList","upgradeOption","getPackagePeerDep","missingDepList","getPackageUpgradeData","outputList","peerDepList","index","arr","outputDependencies","outputUpgradeCount","getUpgradeVersion","peer","optionMaxLenMap","compareLength","peerDependencies","peerPackage","peerVersion","formatPeerVersion","outputDefault","outputPeerDepInfo","filterPeerDepList","colorVersion","heroUIPeerDepList","heroUIThemePeerDepList","allOutputList","allPeerDepList","missingDep","count","stripLatestVersion","writeUpgradeVersion","upgradePackageList","upgradePackage","combineProblemRecord","errorInfo","tailwindName","info","checkRequiredContentInstalled","dependenciesKeys","checkPeerDependenciesConfig","packageNames","peerDependenciesList","hasFramerMotion","hasTailwind","minTailwindVersion","checkPeerDependencies","hasAllComponents","hasSystemUI","hasThemeUI","betaSystemUI","betaThemeUI","config","peerData","findPeerDepIndex","peerDep","findPeerDepVersion","checkTailwind","tailwindPath","logWarning","tailwindContent","contentMatch","pluginsMatch","isDarkModeCorrect","darkMode","isContentCorrect","isPluginsCorrect","plugins","individualContent","isHaveAllContent","checkApp","appPath","appContent","isAppCorrect","checkPnpm","npmrcPath","isPnpmCorrect","checkIllegalComponents","loggerError","illegalList","matchComponent","illegalComponents","matchComponents","illegalComponent","catchPnpmExec","execFn","debugExecAddAction","debugAddedPkg","packageJson","compData","debugRemovedPkg","fixProvider","format","write","wrapWithHeroUIProvider","returnRegex","_","p1","fixTailwind","errorInfoList","errorType","transformErrorInfo","darkModeIndex","darkModeContent","fixPnpm","runInstall","logger","APP_REPO","PAGES_REPO","VITE_REPO","REMIX_REPO","LARAVEL_REPO","APP_DIR","PAGES_DIR","VITE_DIR","REMIX_DIR","LARAVEL_DIR","APP_NAME","PAGES_NAME","VITE_NAME","REMIX_NAME","LARAVEL_NAME","tailwindTemplate","addAction","addApp","prettier","filteredComponents","currentComponent","currentComponentsKeys","filterCurrentComponents","runCmd","mergedComponents","_missingDependencies","template","isCorrectProvider","isCorrectPnpm","doctorAction","_enableCheckApp","_enableCheckPnpm","_enableCheckTailwind","enableCheckApp","enableCheckPnpm","enableCheckTailwind","tailwindPaths","problemRecord","isCorrectInstalled","_isCorrectInstalled","d","isCorrectTailwind","isCorrect","problem","envAction","renameSync","DEFAULT_NPMRC_CONTENT","changeNpmrc","npmrcFile","checkInitOptions","templatesMap","initAction","_projectName","_package","_template","projectName","getTableInfo","run","generateTemplate","renameTemplate","originName","listAction","remote","removeDependencies","remove","removeTailwind","insIncludeAll","removeAction","removeDepList","setupPnpm","betaCompareVersions","autoChangeTag","compareResult","upgradeAction","transformComponents","mergedVersion","herouiData","isUpToDate","ignoreList","isExecute","install","commandList","heroui","command","isArgs","matchCommand","helpInfoArr","debug","targetsArgs","heroUIComponentsBeta","cliLatestVersion","reason"],"mappings":"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","sourcesContent":["import type {CommandName, SAFE_ANY} from '@helpers/type';\n\nimport chalk from 'chalk';\nimport {Command} from 'commander';\n\nimport {isAddingHeroChatCodebase} from '@helpers/actions/add/heroui-chat/add-hero-chat-codebase';\nimport {Logger, gradientString} from '@helpers/logger';\nimport {findMostMatchText} from '@helpers/math-diff';\nimport {outputBox} from '@helpers/output-info';\nimport {getCommandDescAndLog} from '@helpers/utils';\n\nimport pkg from '../package.json';\n\nimport {addAction} from './actions/add-action';\nimport {doctorAction} from './actions/doctor-action';\nimport {envAction} from './actions/env-action';\nimport {initAction, templatesMap} from './actions/init-action';\nimport {listAction} from './actions/list-action';\nimport {removeAction} from './actions/remove-action';\nimport {upgradeAction} from './actions/upgrade-action';\nimport {initStoreComponentsData} from './constants/component';\nimport {getStore, store} from './constants/store';\nimport {getCacheExecData, initCache} from './scripts/cache/cache';\nimport {compareVersions, getComponents} from './scripts/helpers';\n\nconst commandList: CommandName[] = ['add', 'env', 'init', 'list', 'upgrade', 'doctor', 'remove'];\n\nconst heroui = new Command();\n\nheroui\n  .name('heroui')\n  .usage('[command]')\n  .description(getCommandDescAndLog(`\\nHeroUI CLI v${pkg.version}\\n`, ''))\n  .version(pkg.version, '-v, --version', 'Output the current version')\n  .helpOption('-h, --help', 'Display help for command')\n  .allowUnknownOption()\n  .option(\n    '--no-cache',\n    'Disable cache, by default data will be cached for 30m after the first request'\n  )\n  .option('-d, --debug', 'Debug mode will not install dependencies')\n  .action(async (_, command) => {\n    let isArgs = false;\n\n    if (command) {\n      const args = command.args?.[0];\n\n      if (args && !commandList.includes(args as CommandName)) {\n        isArgs = true;\n\n        const matchCommand = findMostMatchText(commandList, args);\n\n        if (matchCommand) {\n          Logger.error(\n            `Unknown command '${args}', Did you mean '${chalk.underline(matchCommand)}'?`\n          );\n        } else {\n          Logger.error(`Unknown command '${args}'`);\n        }\n      }\n    }\n\n    if (!isArgs) {\n      const helpInfo = (await getCacheExecData('heroui --help')) as string;\n\n      let helpInfoArr = helpInfo.split('\\n');\n\n      helpInfoArr = helpInfoArr.filter((info) => info && !info.includes('HeroUI CLI v'));\n      // Add command name color\n      helpInfoArr = helpInfoArr.map((info) => {\n        const command = info.match(/(\\w+)\\s\\[/)?.[1];\n\n        if (command) {\n          return info.replace(command, chalk.cyan(command));\n        }\n\n        return info;\n      });\n\n      Logger.log(helpInfoArr.join('\\n'));\n    }\n    process.exit(0);\n  });\n\nheroui\n  .command('init')\n  .description('Initializes a new project')\n  .argument('[projectName]', 'Name of the project to initialize')\n  .option(\n    '-t --template [string]',\n    `Specify a template for the new project, e.g. ${Object.keys(templatesMap).join(', ')}`\n  )\n  .option('-p --package [string]', 'The package manager to use for the new project', 'npm')\n  .action(initAction);\n\nheroui\n  .command('add')\n  .description('1. Adds components to your project\\n2. Adds HeroUI Chat codebase to your project')\n  .argument('[targets...]', 'Names of components, HeroUI Chat codebase url to add')\n  .option('-a --all [boolean]', 'Add all components', false)\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .option('-tw --tailwindPath [string]', 'Specify the path to the tailwind.config.js file')\n  .option('-app --appPath [string]', 'Specify the path to the App.tsx file')\n  .option('--prettier [boolean]', 'Apply Prettier formatting to the added content')\n  .option('--addApp [boolean]', 'Include App.tsx file content that requires a provider', false)\n  .option('-b --beta [boolean]', 'Add beta components', false)\n  .option('-d --directory [string]', 'Add HeroUI Chat codebase to a specific directory')\n  .action(addAction);\n\nheroui\n  .command('upgrade')\n  .description('Upgrades project components to the latest versions')\n  .argument('[components...]', 'Names of components to upgrade')\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .option('-a --all [boolean]', 'Upgrade all components', false)\n  .option('-w --write [boolean]', 'Write the upgrade version to package.json file', false)\n  .option('-b --beta [boolean]', 'Upgrade beta components', false)\n  .action(upgradeAction);\n\nheroui\n  .command('remove')\n  .description('Removes components from the project')\n  .argument('[components...]', 'Names of components to remove')\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .option('-a --all [boolean]', 'Remove all components', false)\n  .option('-tw --tailwindPath [string]', 'Specify the path to the tailwind.config.js file')\n  .option('--prettier [boolean]', 'Apply Prettier formatting to the added content')\n  .action(removeAction);\n\nheroui\n  .command('list')\n  .description('Lists all components, showing status, descriptions, and versions')\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .option('-r --remote', 'List all components available remotely')\n  .action(listAction);\nheroui\n  .command('env')\n  .description('Displays debugging information for the local environment')\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .action(envAction);\n\nheroui\n  .command('doctor')\n  .description('Checks for issues in the project')\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .option('-tw --tailwindPath [string]', 'Specify the path to the tailwind.config.js file')\n  .option('-app --appPath [string]', 'Specify the path to the App.tsx file')\n  .option('-ca --checkApp [boolean]', 'Check the App.tsx file', false)\n  .option('-ct --checkTailwind [boolean]', 'Check the tailwind.config.js file', true)\n  .option('-cp --checkPnpm [boolean]', 'Check for Pnpm', true)\n  .action(doctorAction);\n\nheroui.hook('preAction', async (command) => {\n  const commandName = command.args?.[0];\n  const options = (command as SAFE_ANY).rawArgs.slice(2);\n  const noCache = options.includes('--no-cache');\n  const debug = options.includes('--debug') || options.includes('-d');\n  const targetsArgs = command.args?.slice(1);\n\n  if (isAddingHeroChatCodebase(targetsArgs) || !commandName) {\n    // HeroUI chat action don't need to init\n    return;\n  }\n\n  // Init cache\n  initCache(noCache);\n  // Init debug\n  store.debug = debug;\n  store.beta = options.includes('-b') || options.includes('--beta');\n\n  if (commandName && commandList.includes(commandName as CommandName)) {\n    // Before run the command init the components.json\n    const heroUIComponents = (await getComponents()).components;\n    const heroUIComponentsBeta = (await getComponents()).betaComponents;\n\n    initStoreComponentsData({beta: false, heroUIComponents: heroUIComponents});\n    store.beta && initStoreComponentsData({beta: true, heroUIComponents: heroUIComponentsBeta});\n  }\n\n  const [cliLatestVersion] = await Promise.all([getStore('cliLatestVersion')]);\n\n  // Init latest version\n  store.cliLatestVersion = cliLatestVersion;\n\n  // Add HeroUI CLI version check preAction\n  const currentVersion = pkg.version;\n\n  if (compareVersions(currentVersion, cliLatestVersion) === -1) {\n    outputBox({\n      center: true,\n      color: 'yellow',\n      padding: 1,\n      text: `${chalk.gray(\n        `Available upgrade: v${currentVersion} -> ${chalk.greenBright(\n          `v${cliLatestVersion}`\n        )}\\nRun \\`${chalk.cyan(\n          'npm install -g heroui-cli@latest'\n        )}\\` to upgrade\\nChangelog: ${chalk.underline(\n          'https://github.com/heroui-inc/heroui-cli/releases'\n        )}`\n      )}`,\n      title: gradientString('HeroUI CLI')\n    });\n    Logger.newLine();\n  }\n});\n\nheroui.parseAsync(process.argv).catch(async (reason) => {\n  Logger.newLine();\n  Logger.error('Unexpected error. Please report it as a bug:');\n  Logger.log(reason);\n  Logger.newLine();\n  process.exit(1);\n});\n","import fs from 'node:fs';\nimport {join} from 'node:path';\n\nimport * as p from '@clack/prompts';\nimport chalk from 'chalk';\nimport {resolve} from 'pathe';\n\nimport {detect} from '@helpers/detect';\nimport {exec} from '@helpers/exec';\nimport {Logger} from '@helpers/logger';\nimport {getPackageInfo} from '@helpers/package';\nimport {confirmClack, getDirectoryClack} from 'src/prompts/clack';\n\nimport {getBaseStorageUrl} from './get-base-storage-url';\nimport {getCodeBaseFiles} from './get-codebase-files';\nimport {fetchAllRelatedFiles} from './get-related-imports';\nimport {writeFilesWithMkdir} from './write-files';\n\nexport interface AddActionOptions {\n  all?: boolean;\n  prettier?: boolean;\n  packagePath?: string;\n  tailwindPath?: string;\n  appPath?: string;\n  addApp?: boolean;\n  beta?: boolean;\n  directory: string;\n}\n\nconst httpRegex = /^https?:\\/\\//;\nconst APP_FILE = 'App.tsx';\n\nexport function isAddingHeroChatCodebase(targets: string[]) {\n  return targets.some((target) => httpRegex.test(target));\n}\n\nexport async function addHeroChatCodebase(targets: string[], options: AddActionOptions) {\n  p.intro(chalk.cyan('Starting to add HeroUI Chat codebase'));\n\n  const directory = resolve(process.cwd(), options.directory ?? (await getDirectoryClack()));\n  const {baseStorageUrl, chatTitle, userId} = await getBaseStorageUrl(targets[0]!);\n  const chatTitleFile = chatTitle ? `${chatTitle}.tsx` : undefined;\n\n  const ifExists = fs.existsSync(directory);\n\n  if (!ifExists) {\n    Logger.error(`Directory ${directory} does not exist`);\n    process.exit(1);\n  }\n\n  /** ======================== Add files ======================== */\n\n  const codeFiles = await getCodeBaseFiles(baseStorageUrl, userId);\n  const appFile = codeFiles.find((file) => file.name.includes(APP_FILE));\n  const pkgContent = codeFiles.find((file) => file.name.includes('package.json'))?.content;\n\n  if (appFile) {\n    const relatedFiles = await fetchAllRelatedFiles({\n      content: appFile.content,\n      entries: codeFiles,\n      filePath: 'src/App.tsx'\n    });\n\n    for (const relatedFile of relatedFiles) {\n      if (relatedFile.fileName.includes(APP_FILE)) {\n        writeFilesWithMkdir(directory, `${chatTitleFile || APP_FILE}`, relatedFile.fileContent);\n        continue;\n      }\n\n      writeFilesWithMkdir(\n        directory,\n        `${relatedFile.filePath.replace('src/', '')}`,\n        relatedFile.fileContent\n      );\n    }\n  }\n\n  /** ======================== Check if the project missing dependencies ======================== */\n  if (pkgContent) {\n    const pkgContentJson = JSON.parse(pkgContent);\n    const {allDependenciesKeys} = getPackageInfo(join(process.cwd(), 'package.json'));\n    const missingDependencies = Object.keys(pkgContentJson.dependencies).filter(\n      (key) => !allDependenciesKeys.has(key)\n    );\n\n    if (missingDependencies.length > 0) {\n      p.log.warn(\n        `The project is missing the following dependencies to run the codebase: ${missingDependencies.join(', ')}`\n      );\n\n      const isAddMissingDependencies = await confirmClack({\n        message: 'Do you want to add the missing dependencies?'\n      });\n\n      const currentPkgManager = await detect();\n      const runCmd = currentPkgManager === 'npm' ? 'install' : 'add';\n      const installCmd = `${currentPkgManager} ${runCmd} ${missingDependencies.map((target) => `${target}@${pkgContentJson.dependencies[target]}`).join(' ')}`;\n\n      if (isAddMissingDependencies) {\n        try {\n          await exec(installCmd);\n        } catch {\n          p.log.error(\n            `Failed to install dependencies. Please add ${missingDependencies.join(' ')} manually.`\n          );\n        }\n      } else {\n        p.note(`Run \\`${installCmd}\\` to start!`, 'Next steps');\n      }\n    }\n  }\n\n  p.outro(chalk.green(' HeroUI Chat codebase added successfully!'));\n}\n\n/** ======================== For the future init project ======================== */\n// else {\n//   for (let file of filesToAdd) {\n//     const filePath = `${url}/${file}`;\n//     const response = await fetchRequest(filePath);\n\n//     let fileContent = await response.text();\n\n//     if (chatTitleFile) {\n//       // Update App.tsx to chatTitle\n//       if (file.includes(APP_FILE)) {\n//         file = file.replace(APP_FILE, chatTitleFile);\n//       }\n//       // Update main.tsx import\n//       if (file.includes('main.tsx')) {\n//         fileContent = fileContent.replace(/from '.\\/App\\.tsx'/, `from './${chatTitleFile}'`);\n//         fileContent = fileContent.replace(/from '.\\/App'/, `from './${chatTitle}'`);\n//       }\n//     }\n\n//     writeFilesWithMkdir(directory, file, fileContent);\n//   }\n// }\n\n/** ======================== Add templates ======================== */\n// for (const [file, value] of Object.entries(templates)) {\n//   writeFilesWithMkdir(directory, file, value.content);\n// }\n\n// const isInstall = await confirmClack({\n//   message: 'Do you want to install the dependencies?'\n// });\n\n// if (isInstall) {\n//   const packageManager = await detect();\n//   const installCmd =\n//     packageManager === 'pnpm' ? 'pnpm install --shamefully-hoist' : `${packageManager} install`;\n\n//   try {\n//     await exec(`cd ${directory} && ${installCmd} && npm run dev`);\n//   } catch {\n//     p.log.error(`Failed to install dependencies. Please run \"${installCmd}\" manually.`);\n//   }\n// } else {\n//   p.note(`Cd to ${directory}\\nRun \\`pnpm install\\` to start!`, 'Next steps');\n// }\n","import type {SAFE_ANY} from './type';\n\nimport {findUp} from 'find-up';\nimport path from 'pathe';\n\nimport {ROOT} from 'src/constants/path';\nimport {getSelect} from 'src/prompts';\n\ntype TupleToUnion<T extends readonly SAFE_ANY[]> = T[number];\n\nexport const AGENTS = ['npm', 'bun', 'pnpm', 'yarn'] as const;\n\nexport type Agent = TupleToUnion<typeof AGENTS>;\n\nexport const agents = AGENTS;\n\n// the order here matters, more specific one comes first\nexport const LOCKS: Record<string, Agent> = {\n  'bun.lockb': 'bun',\n  'npm-shrinkwrap.json': 'npm',\n  'package-lock.json': 'npm',\n  'pnpm-lock.yaml': 'pnpm',\n  'yarn.lock': 'yarn'\n};\n\nexport async function detect(cwd = ROOT) {\n  let agent: Agent;\n  const lockPath = await findUp(Object.keys(LOCKS), {cwd});\n\n  // detect based on lock\n  if (lockPath) {\n    agent = LOCKS[path.basename(lockPath)]!;\n  } else {\n    agent = await getSelect(\n      'No agent found, please choose one',\n      AGENTS.map((agent) => ({\n        title: agent,\n        value: agent\n      }))\n    );\n  }\n\n  return agent;\n}\n","import {fileURLToPath} from 'node:url';\n\nimport {resolve} from 'pathe';\n\nexport const ROOT = process.cwd();\nexport const resolver = (path: string) => resolve(ROOT, path);\n\nexport const COMPONENTS_PATH = resolve(fileURLToPath(import.meta.url), '../components.json');\n","import prompts from '@winches/prompts';\nimport chalk from 'chalk';\n\nimport {Logger} from '@helpers/logger';\n\nconst defaultPromptOptions: prompts.Options = {\n  onCancel: () => {\n    Logger.log(`${chalk.red('')} Operation cancelled`);\n    process.exit(0);\n  }\n};\n\nexport async function getText(message: string, initial?: string) {\n  const result = await prompts(\n    {\n      message,\n      name: 'value',\n      type: 'text',\n      ...(initial ? {initial} : {})\n    },\n    defaultPromptOptions\n  );\n\n  return result.value;\n}\n\nexport async function getAutocomplete(message: string, choices?: prompts.Choice[]) {\n  const result = await prompts(\n    {\n      message,\n      name: 'value',\n      type: 'autocomplete',\n      ...(choices ? {choices} : {})\n    },\n    defaultPromptOptions\n  );\n\n  return result.value;\n}\n\nexport async function getAutocompleteMultiselect(message: string, choices?: prompts.Choice[]) {\n  const result = await prompts(\n    {\n      hint: '- Space to select. Return to submit',\n      message,\n      min: 1,\n      name: 'value',\n      type: 'autocompleteMultiselect',\n      ...(choices ? {choices} : {})\n    },\n    defaultPromptOptions\n  );\n\n  return result.value;\n}\n\nexport async function getSelect(message: string, choices: prompts.Choice[]) {\n  const result = await prompts(\n    {\n      message,\n      name: 'value',\n      type: 'select',\n      ...(choices ? {choices} : {})\n    },\n    defaultPromptOptions\n  );\n\n  return result.value;\n}\n\nexport async function getMultiselect(message: string, choices?: prompts.Choice[]) {\n  const result = await prompts(\n    {\n      hint: '- Space to select. Return to submit',\n      message,\n      min: 1,\n      name: 'value',\n      type: 'multiselect',\n      ...(choices ? {choices} : {})\n    },\n    defaultPromptOptions\n  );\n\n  return result.value;\n}\n","/* eslint-disable no-console */\n\nimport type {SAFE_ANY} from './type';\n\nimport chalk from 'chalk';\nimport {default as _gradientString} from 'gradient-string';\n\nexport const defaultColors = ['#F54180', '#338EF7'] as const;\n\nexport const gradientString = _gradientString(...defaultColors);\n\nconst logPrefix = gradientString('HeroUI CLI:');\n\nexport type PrefixLogType = Extract<\n  keyof typeof Logger,\n  'error' | 'gradient' | 'info' | 'log' | 'warn' | 'success'\n>;\nexport class Logger {\n  constructor() {}\n\n  static log(...args: Parameters<typeof console.log>) {\n    console.log(...args);\n  }\n\n  static info(...args: Parameters<typeof console.info>) {\n    console.info(...args.map((item) => chalk.blue(item)));\n  }\n\n  static success(...args: Parameters<typeof console.info>) {\n    console.info(...args.map((item) => chalk.green(item)));\n  }\n\n  static warn(...args: Parameters<typeof console.warn>) {\n    console.warn(...args.map((item) => chalk.yellow(item)));\n  }\n\n  static error(...args: Parameters<typeof console.error>) {\n    console.error(...args.map((item) => chalk.red(item)));\n  }\n\n  static grey(...args: Parameters<typeof console.log>) {\n    console.log(...args.map((item) => chalk.gray(item)));\n  }\n\n  static gradient(content: string | number | boolean, options?: {colors?: tinycolor.ColorInput[]}) {\n    this.log(_gradientString(...(options?.colors ?? defaultColors))(String(content)));\n  }\n\n  static prefix(type: PrefixLogType, ...args: SAFE_ANY) {\n    return this[type](logPrefix, ...args);\n  }\n\n  static newLine(lines?: number) {\n    if (!lines) lines = 1;\n\n    for (let i = 0; i < lines; i++) this.log();\n  }\n}\n","import type {AppendKeyValue} from './type';\n\nimport {type CommonExecOptions, execSync} from 'node:child_process';\n\nimport {Logger} from './logger';\nimport {omit} from './utils';\n\nconst execCache = new Map<string, string>();\n\n/**\n * Execute a command and return the output\n *\n * Recommend use `getCacheExecData` instead if you want to cache the output\n */\nexport async function exec(\n  cmd: string,\n  commonExecOptions?: AppendKeyValue<CommonExecOptions, 'logCmd', boolean> & {\n    cache?: boolean;\n  }\n) {\n  return new Promise((resolve, reject) => {\n    try {\n      const {cache = true, logCmd = true} = commonExecOptions || {};\n\n      if (execCache.has(cmd) && cache) {\n        resolve(execCache.get(cmd));\n      }\n\n      if (logCmd) {\n        Logger.newLine();\n        Logger.log(`${cmd}`);\n      }\n\n      const stdout = execSync(cmd, {\n        stdio: 'inherit',\n        ...(commonExecOptions ? omit(commonExecOptions, ['logCmd']) : {})\n      });\n\n      if (stdout) {\n        const output = stdout.toString();\n\n        resolve(output);\n        execCache.set(cmd, output);\n      }\n      resolve('');\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n","import type {Agent} from './detect';\nimport type {PascalCase, SAFE_ANY} from './type';\n\nimport chalk from 'chalk';\nimport {compareVersions} from 'compare-versions';\nimport fg, {type Options} from 'fast-glob';\n\nimport {ROOT} from 'src/constants/path';\n\nimport {Logger} from './logger';\nimport {colorMatchRegex} from './output-info';\n\nexport const versionModeRegex = /([\\^~])/;\n\nexport function getCommandDescAndLog(log: string, desc: string) {\n  Logger.gradient(log);\n\n  return desc;\n}\n\n/**\n * Convert a string to PascalCase.\n * @example 'test-test' => 'TestTest'\n * @param str\n */\nexport function PasCalCase<T extends string>(str: T) {\n  return str\n    .split('-')\n    .map((s) => s.charAt(0).toUpperCase() + s.slice(1))\n    .join('') as PascalCase<T>;\n}\n\n/**\n * Find files by glob pattern.\n * @param glob\n * @param options\n */\nexport const findFiles = (glob: string, options?: Options) => {\n  const file = fg.sync(glob, {\n    absolute: true,\n    cwd: ROOT,\n    deep: 5,\n    ignore: ['node_modules/**', 'dist/**', 'build/**', 'coverage/**', 'public/**', 'out/**'],\n    onlyFiles: true,\n    ...options\n  });\n\n  return file;\n};\n\nexport function transformOption(options: boolean | 'false') {\n  if (options === 'false') return false;\n\n  return !!options;\n}\n\nexport function omit(obj: Record<string, SAFE_ANY>, keys: string[]) {\n  return Object.fromEntries(Object.entries(obj).filter(([key]) => !keys.includes(key)));\n}\n\nexport function getUpgradeType({\n  major,\n  minor,\n  patch\n}: {\n  major: boolean;\n  minor: boolean;\n  patch: boolean;\n}) {\n  if (major) return 'major';\n  if (minor) return 'minor';\n  if (patch) return 'patch';\n\n  return 'minor';\n}\n\nexport function getColorVersion(currentVersion: string, latestVersion: string) {\n  currentVersion = transformPeerVersion(currentVersion);\n  latestVersion = transformPeerVersion(latestVersion);\n\n  if (isMajorUpdate(currentVersion, latestVersion)) {\n    return isMajorUpdate(currentVersion, latestVersion);\n  } else if (isMinorUpdate(currentVersion, latestVersion)) {\n    return isMinorUpdate(currentVersion, latestVersion);\n  } else if (isPatchUpdate(currentVersion, latestVersion)) {\n    return isPatchUpdate(currentVersion, latestVersion);\n  }\n\n  return latestVersion;\n}\n\nexport function isMajorUpdate(currentVersion: string, latestVersion: string) {\n  const currentVersionArr = currentVersion.split('.');\n  const latestVersionArr = latestVersion.split('.');\n\n  if (currentVersionArr[0] !== latestVersionArr[0]) {\n    return chalk.redBright(latestVersionArr.join('.'));\n  }\n\n  return '';\n}\n\nexport function isMinorUpdate(currentVersion: string, latestVersion: string) {\n  const currentVersionArr = currentVersion.split('.');\n  const latestVersionArr = latestVersion.split('.');\n\n  if (currentVersionArr[1] !== latestVersionArr[1]) {\n    return `${chalk.white(latestVersionArr[0])}${chalk.white('.')}${chalk.cyanBright(\n      latestVersionArr.slice(1).join('.')\n    )}`;\n  }\n\n  return '';\n}\n\nexport function isPatchUpdate(currentVersion: string, latestVersion: string) {\n  const currentVersionArr = currentVersion.split('.');\n  const latestVersionArr = latestVersion.split('.');\n\n  if (currentVersionArr[2] !== latestVersionArr[2]) {\n    return `${chalk.white(latestVersionArr.slice(0, 2).join('.'))}${chalk.white(\n      '.'\n    )}${chalk.greenBright(latestVersionArr.slice(2).join('.'))}`;\n  }\n\n  return '';\n}\n\nexport function getVersionAndMode(allDependencies: Record<string, SAFE_ANY>, packageName: string) {\n  const currentVersion = allDependencies[packageName].replace(versionModeRegex, '');\n  const versionMode = allDependencies[packageName].match(versionModeRegex)?.[1] || '';\n\n  return {\n    currentVersion,\n    versionMode\n  };\n}\n\nexport function getPackageManagerInfo<T extends Agent = Agent>(packageManager: T) {\n  const packageManagerInfo = {\n    bun: {\n      install: 'add',\n      remove: 'remove',\n      run: 'run'\n    },\n    npm: {\n      install: 'install',\n      remove: 'uninstall',\n      run: 'run'\n    },\n    pnpm: {\n      install: 'add',\n      remove: 'remove',\n      run: 'run'\n    },\n    yarn: {\n      install: 'add',\n      remove: 'remove',\n      run: 'run'\n    }\n  } as const;\n\n  return packageManagerInfo[packageManager] as (typeof packageManagerInfo)[T];\n}\n\n/**\n * @example transformPeerVersion('>=1.0.0') // '1.0.0'\n * @example transformPeerVersion(\">=11.5.6 || >=12.0.0-alpha.1\") // 11.5.6\n * @param version\n */\nexport function transformPeerVersion(version: string, isLatest = false) {\n  const ranges = version.split('||').map((r) => r.trim());\n  const result = ranges\n    .map((range) => {\n      return range.replace(/^[<=>^~]+\\s*/, '').trim();\n    })\n    .sort((a, b) => {\n      if (isLatest) {\n        return compareVersions(b, a);\n      }\n\n      return compareVersions(a, b);\n    });\n\n  return result[0]!;\n}\n\nexport function fillAnsiLength(str: string, length: number) {\n  const stripStr = str.replace(colorMatchRegex, '');\n  const fillSpace = length - stripStr.length > 0 ? ' '.repeat(length - stripStr.length) : '';\n\n  return `${str}${fillSpace}`;\n}\n\nexport function strip(str: string) {\n  return str.replace(colorMatchRegex, '');\n}\n","import type {ChalkColor, CommandName} from './type';\n\nimport chalk from 'chalk';\n\nimport {boxRound} from 'src/constants/box';\nimport {\n  type HeroUIComponent,\n  type HeroUIComponents,\n  colorHeroUIComponentKeys,\n  orderHeroUIComponentKeys\n} from 'src/constants/component';\n\nimport {Logger} from './logger';\nimport {PasCalCase, fillAnsiLength, strip} from './utils';\n\n// eslint-disable-next-line no-control-regex\nexport const colorMatchRegex = /\\u001b\\[[\\d;]+m/g;\n\nconst rounded = boxRound.round;\nconst space = '   ';\nconst padStart = `${rounded.vertical}${space}`;\nconst padEnd = `${space}${rounded.vertical}${space}`;\nconst versionRegex = /([\\W\\w]+)\\snew:/;\nconst newVersionRegex = /new:\\s([\\W\\w]+)/;\n\n/**\n * Output the components information e.g. status, description, version, etc.\n * @param components\n * @param commandName\n * @param warnError\n */\nexport function outputComponents({\n  commandName,\n  components,\n  message = 'Current installed components:\\n',\n  warnError = true\n}: {\n  components: HeroUIComponents;\n  commandName?: CommandName;\n  warnError?: boolean;\n  message?: string;\n}) {\n  if (!components.length) {\n    if (warnError) {\n      Logger.prefix('warn', 'No components found');\n    }\n\n    return;\n  }\n\n  const componentKeyLengthMap: Record<keyof HeroUIComponent | 'originVersion', number> = {\n    description: 0,\n    docs: 0,\n    name: 0,\n    originVersion: 0,\n    package: 0,\n    peerDependencies: 0,\n    status: 0,\n    style: 0,\n    version: 0\n  };\n\n  for (const component of components) {\n    for (const key in component) {\n      const str = String(component[key]);\n\n      if (key === 'version') {\n        const newVersion = str.match(newVersionRegex)?.[1];\n        const currentVersion = str.match(versionRegex)?.[1];\n\n        const value = strip(generateComponentOutputVersion(currentVersion!, newVersion!));\n\n        // Align the length of the version\n        componentKeyLengthMap[key] = Math.max(\n          componentKeyLengthMap[key],\n          Math.max(value.length, 'version'.length)\n        );\n        // Record origin version length\n        componentKeyLengthMap.originVersion = Math.max(\n          componentKeyLengthMap.originVersion,\n          currentVersion!.length\n        );\n\n        continue;\n      }\n\n      componentKeyLengthMap[key] = Math.max(componentKeyLengthMap[key], str.length);\n    }\n  }\n\n  let transformComponentsOutput = components.reduce((acc, component) => {\n    let outputData = padStart;\n\n    for (const key of orderHeroUIComponentKeys) {\n      let value = fillAnsiLength(component[key], componentKeyLengthMap[key]);\n\n      /** ======================== Replace version to new version ======================== */\n      if (commandName !== 'list' && key === 'version') {\n        // Filter list command cause it will list all the latest components\n        const currentVersion = value.match(versionRegex)?.[1]?.trim();\n        const newVersion = value.match(newVersionRegex)?.[1]?.trim();\n\n        if (currentVersion === newVersion) {\n          value = value.replace(/\\snew:\\s[\\W\\w]+(\\s+)?/, '');\n          value = fillAnsiLength(\n            `${fillAnsiLength(value, componentKeyLengthMap.originVersion)} latest`,\n            componentKeyLengthMap[key]\n          );\n          value = value.replace('latest', chalk.magentaBright.underline('latest'));\n        } else if (newVersion) {\n          value = fillAnsiLength(\n            generateComponentOutputVersion(\n              fillAnsiLength(currentVersion!, componentKeyLengthMap.originVersion),\n              newVersion\n            ),\n            componentKeyLengthMap[key]\n          );\n        }\n      }\n\n      /** ======================== Change the color according to different status ======================== */\n      if (component.status === 'stable' && colorHeroUIComponentKeys.includes(key)) {\n        value = chalk.greenBright(value);\n      } else if (component.status === 'new') {\n        value = chalk.magentaBright(value);\n      } else if (component.status === 'updated') {\n        value = chalk.blueBright(value);\n      }\n\n      outputData += value + padEnd;\n    }\n\n    outputData;\n\n    acc.push(outputData);\n\n    return acc;\n  }, [] as string[]);\n\n  /** ======================== Generate box header ======================== */\n  let boxHeader = rounded.topLeft + padStart.replace(/.*/g, rounded.horizontal).slice(1);\n  let boxHeaderSec = padStart;\n  let boxHeaderTrd = rounded.vertical + padStart.replace(/.*/g, rounded.horizontal).slice(1);\n\n  for (const key of orderHeroUIComponentKeys) {\n    boxHeader += `${rounded.horizontal.padEnd(componentKeyLengthMap[key] + 7, rounded.horizontal)}`;\n    boxHeaderSec += chalk.redBright(PasCalCase(key).padEnd(componentKeyLengthMap[key])) + padEnd;\n    boxHeaderTrd += `${rounded.horizontal.padEnd(\n      componentKeyLengthMap[key] + 7,\n      rounded.horizontal\n    )}`;\n  }\n\n  boxHeader = boxHeader.slice(0, -2) + rounded.topRight;\n  boxHeaderTrd = boxHeaderTrd.slice(0, -2) + rounded.vertical;\n\n  /** ======================== Generate box footer ======================== */\n  let boxFooter = rounded.bottomLeft + padStart.replace(/.*/g, rounded.horizontal).slice(1);\n\n  for (const key of orderHeroUIComponentKeys) {\n    boxFooter += `${rounded.horizontal.padEnd(componentKeyLengthMap[key] + 7, rounded.horizontal)}`;\n  }\n\n  boxFooter = boxFooter.slice(0, -2) + rounded.bottomRight;\n\n  transformComponentsOutput = [\n    boxHeader,\n    boxHeaderSec,\n    boxHeaderTrd,\n    ...transformComponentsOutput,\n    boxFooter\n  ];\n\n  Logger.info(message);\n\n  Logger.log(transformComponentsOutput.join('\\n'));\n}\n\n/**\n * Output the environment information e.g. OS, CPU, Node version, etc.\n */\nexport function outputInfo() {\n  Logger.newLine();\n  Logger.log(chalk.redBright('Environment Info:'));\n  Logger.log(chalk.blueBright('  System:'));\n  Logger.log(chalk.blueBright('    OS:'), process.platform);\n  Logger.log(chalk.blueBright('    CPU:'), process.arch);\n  Logger.log(chalk.greenBright('  Binaries:'));\n  Logger.log(chalk.greenBright('    Node:'), process.version);\n  Logger.newLine();\n}\n\n/**\n * Output a box with the content\n * @param text\n * @param center\n * @param log\n * @param color\n * @param title\n * @param borderStyle\n * @param padding\n * @param align\n */\nexport function outputBox({\n  align = 'center',\n  borderStyle = 'round',\n  center = false,\n  color,\n  log = true,\n  padding = 0,\n  text,\n  title\n}: {\n  text: string;\n  center?: boolean;\n  log?: boolean;\n  color?: ChalkColor;\n  title?: string;\n  borderStyle?: keyof typeof boxRound;\n  padding?: number;\n  align?: 'left' | 'center' | 'right';\n}) {\n  const rounded = boxRound[borderStyle];\n  const mergedRounded = color\n    ? Object.fromEntries(Object.entries(rounded).map(([key, value]) => [key, chalk[color](value)]))\n    : rounded;\n  const contentArr = text.split('\\n');\n  const transformArr = contentArr.map((c) => c.replace(colorMatchRegex, ''));\n\n  const isPadding = padding > 0;\n  const paddingLength = padding;\n\n  const mergedPadding = center || isPadding;\n\n  let maxLength = transformArr.reduce((acc, cur) => (cur.length > acc ? cur.length : acc), 0);\n\n  // Update the padding maxLength\n  // paddingLength * 2 because one vertical line == 4 spaces\n  maxLength = isPadding ? maxLength + paddingLength * 4 : maxLength;\n\n  const clearColorTitle = title ? title.replace(colorMatchRegex, '') : '';\n  const titleLength = title ? clearColorTitle.length : 0;\n  let titleHeaderLength = maxLength - titleLength;\n  const spaceLen = 2;\n\n  while (titleLength + spaceLen + paddingLength >= maxLength) {\n    // Need to adjust the maxLength\n    maxLength += Math.floor(titleLength / 2);\n  }\n  // Update the titleHeaderLength\n  titleHeaderLength = maxLength - titleLength;\n\n  const boxHeaderContent = (() => {\n    if (title) {\n      if (align === 'center') {\n        const spaceFir = Math.floor(titleHeaderLength / 2) - 1;\n        const spaceSec = Math.ceil(titleHeaderLength / 2) - 1;\n\n        const padFir = spaceFir > 0 ? mergedRounded.horizontal.repeat(spaceFir) : '';\n        const padSec = spaceSec > 0 ? mergedRounded.horizontal.repeat(spaceSec) : '';\n\n        return `${padFir} ${title} ${padSec}`;\n      } else if (align === 'left') {\n        return ` ${title} ${mergedRounded.horizontal.repeat(titleHeaderLength - 2)}`;\n      } else {\n        return `${mergedRounded.horizontal.repeat(titleHeaderLength - 2)} ${title} `;\n      }\n    }\n\n    return mergedRounded.horizontal.repeat(maxLength);\n  })();\n\n  const boxHeader = mergedRounded.topLeft + boxHeaderContent + mergedRounded.topRight;\n  const boxFooter =\n    mergedRounded.bottomLeft +\n    mergedRounded.horizontal.repeat(maxLength) +\n    mergedRounded.bottomRight;\n\n  let boxContent = contentArr.reduce((acc, cur) => {\n    const transformCur = cur.replace(colorMatchRegex, '');\n    const spaceLength = maxLength - transformCur.length;\n\n    const pad = ' '.repeat(spaceLength);\n\n    const spaceFir = Math.floor(spaceLength / 2);\n    const spaceSec = Math.ceil(spaceLength / 2);\n\n    const padFir = spaceFir > 0 ? ' '.repeat(spaceFir) : '';\n    const padSec = spaceSec > 0 ? ' '.repeat(spaceSec) : '';\n\n    // Over 2 cause one vertical line == 2 spaces\n    // paddingLength = Math.floor(Math.max(paddingLength, spaceFir, spaceSec) / 2);\n\n    if (center) {\n      acc.push(\n        `${mergedRounded.vertical}${spaceLength ? `${padFir}${cur}${padSec}` : cur}${\n          mergedRounded.vertical\n        }`\n      );\n    } else if (padding) {\n      const endLen = spaceLength - paddingLength * 2;\n\n      acc.push(\n        `${mergedRounded.vertical}${' '.repeat(paddingLength * 2)}${cur}${' '.repeat(endLen)}${\n          mergedRounded.vertical\n        }`\n      );\n    } else {\n      acc.push(\n        `${mergedRounded.vertical}${spaceLength > 0 ? `${cur}${pad}` : cur}${\n          mergedRounded.vertical\n        }`\n      );\n    }\n\n    return acc;\n  }, [] as string[]);\n\n  // Generate the padding\n  if (mergedPadding) {\n    for (let i = 0; i < paddingLength; i++) {\n      boxContent.unshift(\n        `${mergedRounded.vertical}${' '.repeat(maxLength)}${mergedRounded.vertical}`\n      );\n      boxContent.push(`${mergedRounded.vertical}${' '.repeat(maxLength)}${mergedRounded.vertical}`);\n    }\n  }\n\n  boxContent = [boxHeader, ...boxContent, boxFooter];\n\n  log && Logger.log(boxContent.join('\\n'));\n\n  return boxContent.join('\\n');\n}\n\nfunction generateComponentOutputVersion(currentVersion: string, newVersion: string) {\n  return `${chalk.white(`${currentVersion} ->`)} ${chalk.yellowBright(`${newVersion} (new)`)}`;\n}\n\nexport function outputDeprecatedInfo() {\n  outputBox({\n    color: 'yellow',\n    padding: 1,\n    text: `NextUI has rebranded to HeroUI! These packages are deprecated and wont receive updates.\nHeroUI offers the same great features with ongoing improvements.\n\n ${chalk.bold('Switch to [HeroUI](https://heroui.com) for the latest updates.')}\n ${chalk.bold('Migration guide:')} [NextUI to HeroUI](https://heroui.com/docs/nextui-to-heroui)\n ${chalk.bold('New NPM package:')} \"@heroui/react\"\n\nThanks for your support  see you at HeroUI!`,\n    title: chalk.yellow(` Notice: NextUI is now ${chalk.bold('HeroUI')} `)\n  });\n}\n","export const boxRound = {\n  bold: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  },\n  classic: {\n    bottomLeft: '+',\n    bottomRight: '+',\n    horizontal: '-',\n    topLeft: '+',\n    topRight: '+',\n    vertical: '|'\n  },\n  double: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  },\n  doubleSingle: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  },\n  round: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  },\n  single: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  },\n  singleDouble: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  }\n};\n","import type {SAFE_ANY} from '@helpers/type';\n\nimport {existsSync, mkdirSync, readFileSync, unlinkSync, writeFileSync} from 'node:fs';\n\nimport {oraExecCmd} from '../helpers';\nimport {CACHE_DIR, CACHE_PATH} from '../path';\n\nconst cacheTTL = 30 * 60_000; // 30min\nlet noCache = false;\n\nexport interface CacheData {\n  [packageName: string]: {\n    version: string;\n    date: Date;\n    formatDate: string;\n    expiredDate: number;\n    expiredFormatDate: string;\n    execResult: SAFE_ANY;\n  };\n}\n\nexport function initCache(_noCache = noCache) {\n  noCache = !!_noCache;\n\n  const isExistCache = existsSync(CACHE_DIR);\n\n  if (isExistCache) return;\n\n  mkdirSync(CACHE_DIR, {recursive: true});\n  writeFileSync(CACHE_PATH, JSON.stringify({}), 'utf8');\n}\n\nexport function getCacheData(): CacheData {\n  const data = readFileSync(CACHE_PATH, 'utf8');\n\n  return JSON.parse(data);\n}\n\n/**\n * Used to cache unknown npm package expired time 30m\n * @packageName string\n */\nexport function cacheData(\n  packageName: string,\n  packageData: {\n    version?: string;\n    execResult?: SAFE_ANY;\n  },\n  cacheData?: CacheData\n) {\n  initCache();\n\n  const data = cacheData ?? getCacheData();\n  const now = new Date();\n  const expiredDate = +now + cacheTTL;\n\n  data[packageName] = {\n    ...(packageData as SAFE_ANY),\n    date: now,\n    expiredDate,\n    expiredFormatDate: new Date(expiredDate).toString(),\n    formatDate: now.toString()\n  };\n\n  writeFileSync(CACHE_PATH, JSON.stringify(data, undefined, 2), 'utf-8');\n}\n\nexport function removeCache() {\n  unlinkSync(CACHE_DIR);\n}\n\nfunction now() {\n  return +new Date();\n}\n\nfunction ttl(n: number) {\n  return now() - n;\n}\n\nexport function isExpired(packageName: string, cacheData?: CacheData) {\n  // If noCache then always return true\n  if (noCache) return true;\n\n  const data = cacheData ?? getCacheData();\n  const pkgData = data[packageName];\n\n  if (!pkgData?.expiredDate) return true;\n\n  return ttl(pkgData.expiredDate) > 0;\n}\n\nexport async function getPackageVersion(packageName: string) {\n  const data = getCacheData();\n  const isExpiredPkg = isExpired(packageName, data);\n\n  // If expired or don't exist then init data\n  if (isExpiredPkg) {\n    const version = await oraExecCmd(\n      `npm view ${packageName} version`,\n      `Fetching ${packageName} latest version`\n    );\n\n    const pkgVersion = {version};\n\n    cacheData(packageName, pkgVersion, data);\n\n    return pkgVersion;\n  }\n\n  return data[packageName]!;\n}\n\nexport async function getCacheExecData<T extends SAFE_ANY>(\n  key: string,\n  execMessage?: string\n): Promise<T> {\n  const data = getCacheData();\n  const isExpiredPkg = isExpired(key, data);\n\n  // If expired or don't exist then init data\n  if (isExpiredPkg) {\n    const execResult = await oraExecCmd(key, execMessage);\n\n    const result = {execResult};\n\n    cacheData(key, result, data);\n\n    return result.execResult;\n  }\n\n  return data[key]!.execResult;\n}\n","import type {SAFE_ANY} from '@helpers/type';\n\nimport {exec} from 'node:child_process';\nimport {existsSync, readFileSync, writeFileSync} from 'node:fs';\n\nimport retry from 'async-retry';\nimport chalk from 'chalk';\nimport {compareVersions as InternalCompareVersions, validate} from 'compare-versions';\nimport ora, {oraPromise} from 'ora';\n\nimport {Logger} from '@helpers/logger';\nimport {COMPONENTS_PATH} from 'src/constants/path';\nimport {getStore, getStoreSync, store} from 'src/constants/store';\n\nimport {getPackageVersion} from './cache/cache';\n\nexport type Dependencies = Record<string, string>;\n\nexport type Components = {\n  name: string;\n  package: string;\n  version: string;\n  docs: string;\n  description: string;\n  status: string;\n  style: string;\n  peerDependencies: Dependencies;\n}[];\n\nexport type ComponentsJson = {\n  version: string;\n  components: Components;\n  betaComponents: Components;\n  betaVersion: string;\n};\n\n/**\n * Compare two versions\n * @example compareVersions('1.0.0', '1.0.1') // -1\n * compareVersions('1.0.1', '1.0.0') // 1\n * compareVersions('1.0.0', '1.0.0') // 0\n * @param version1\n * @param version2\n */\nexport function compareVersions(version1 = '', version2 = '') {\n  if (!validate(version1)) {\n    // e.g. Current version is https://pkg.pr.new/@heroui/dropdown@4656 then just upgrade to latest version\n    return -1;\n  }\n  try {\n    return InternalCompareVersions(version1, version2);\n  } catch {\n    // Can't not support ('18 || 19.0.0-rc.0' received) temporary solution\n    return 0;\n  }\n}\n\nexport async function updateComponents() {\n  if (!existsSync(COMPONENTS_PATH)) {\n    // First time download the latest date from net\n    await autoUpdateComponents();\n\n    return;\n  }\n\n  const components = JSON.parse(readFileSync(COMPONENTS_PATH, 'utf-8')) as ComponentsJson;\n  const currentVersion = components.version;\n  const betaVersion = components.betaVersion;\n  const latestVersion = await getStore('latestVersion');\n  const latestBetaVersion = await getStore('betaVersion');\n\n  if (\n    compareVersions(currentVersion, latestVersion) === -1 ||\n    (betaVersion && compareVersions(betaVersion, latestBetaVersion) === -1)\n  ) {\n    // After the first time, check the version and update\n    await autoUpdateComponents(latestVersion, latestBetaVersion);\n  }\n}\n\nexport async function getComponents() {\n  let components: ComponentsJson = {} as ComponentsJson;\n\n  await updateComponents();\n\n  try {\n    components = JSON.parse(readFileSync(COMPONENTS_PATH, 'utf-8')) as ComponentsJson;\n  } catch (error) {\n    new Error(`Get components.json error: ${error}`);\n  }\n\n  return components;\n}\n\nexport async function oraExecCmd(cmd: string, text?: string): Promise<SAFE_ANY> {\n  text = text ?? `Executing ${cmd}`;\n\n  const spinner = ora({\n    // Open ctrl + c cancel\n    discardStdin: false,\n    spinner: {\n      frames: [\n        ` ${chalk.gray(`${text}.`)}`,\n        ` ${chalk.gray(`${text}..`)}`,\n        ` ${chalk.gray(`${text}...`)}`,\n        ` ${chalk.gray(`${text}.`)}`,\n        ` ${chalk.gray(`${text}..`)}`,\n        ` ${chalk.gray(`${text}...`)}`,\n        ` ${chalk.gray(`${text}.`)}`,\n        ` ${chalk.gray(`${text}..`)}`,\n        ` ${chalk.gray(`${text}...`)}`,\n        ` ${chalk.gray(`${text}.`)}`\n      ],\n      interval: 150\n    }\n  });\n\n  spinner.start();\n\n  const result = await new Promise((resolve) => {\n    exec(cmd, (error, stdout) => {\n      if (error) {\n        Logger.error(`Exec cmd ${cmd} error`);\n        process.exit(1);\n      }\n      resolve(stdout.trim());\n    });\n  });\n\n  spinner.stop();\n\n  return result;\n}\n\nexport async function getLatestVersion(packageName: string): Promise<string> {\n  if (store.heroUIComponentsPackageMap[packageName]) {\n    return store.heroUIComponentsPackageMap[packageName]!.version;\n  }\n\n  const result = await getPackageVersion(packageName);\n\n  return result.version;\n}\n\nconst getUnpkgUrl = (version: string) =>\n  `https://unpkg.com/@heroui/react@${version}/dist/components.json`;\n\nexport async function autoUpdateComponents(latestVersion?: string, betaVersion?: string) {\n  [latestVersion, betaVersion] = await Promise.all([\n    latestVersion || getStore('latestVersion'),\n    betaVersion || getStore('betaVersion')\n  ]);\n\n  const url = getUnpkgUrl(latestVersion);\n\n  const [components, betaComponents] = await Promise.all([\n    downloadFile(url),\n    getStoreSync('beta') && betaVersion\n      ? downloadFile(getUnpkgUrl(betaVersion), false)\n      : Promise.resolve([])\n  ]);\n\n  const filterMissingComponents = betaComponents.filter(\n    (component) => !components.find((c) => c.name === component.name)\n  );\n\n  // Add missing beta components to components\n  components.push(...filterMissingComponents);\n\n  const componentsJson: ComponentsJson = {\n    betaComponents,\n    betaVersion,\n    components,\n    version: latestVersion\n  };\n\n  writeFileSync(COMPONENTS_PATH, JSON.stringify(componentsJson, null, 2), 'utf-8');\n\n  return componentsJson;\n}\n\nexport async function downloadFile(url: string, log = true): Promise<Components> {\n  let data;\n\n  await oraPromise(\n    retry(\n      async (bail) => {\n        try {\n          const result = await fetch(url, {\n            body: null,\n            headers: {\n              'Content-Type': 'application/json',\n              accept:\n                'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7'\n            },\n            method: 'GET',\n            mode: 'cors'\n          });\n\n          data = JSON.parse(await result.text());\n        } catch (error) {\n          bail(error);\n        }\n      },\n      {\n        retries: 3\n      }\n    ),\n    {\n      failText(error) {\n        log && Logger.prefix('error', `Update components data error: ${error}`);\n        process.exit(1);\n      },\n      ...(log ? {successText: chalk.greenBright('Components data updated successfully!\\n')} : {}),\n      text: 'Fetching components data...'\n    }\n  );\n\n  return data;\n}\n\nexport const isGithubAction = process.env['CI'] === 'true';\n","import {existsSync} from 'node:fs';\nimport {fileURLToPath} from 'node:url';\n\nimport {join, resolve} from 'pathe';\n\nexport const ROOT = resolve(fileURLToPath(import.meta.url), '../..');\n\nexport const resolver = (path: string) => resolve(ROOT, path);\n\nconst PROD_DIR = resolve(fileURLToPath(import.meta.url), '..');\nconst PROD = existsSync(join(PROD_DIR, 'components.json'));\n\nexport const CACHE_DIR = PROD\n  ? resolve(`${PROD_DIR}/.heroui-cli-cache`)\n  : resolve(join(ROOT, '..'), 'node_modules/.heroui-cli-cache');\nexport const CACHE_PATH = resolve(`${CACHE_DIR}/data.json`);\n","import {store} from 'src/constants/store';\nimport {getCacheExecData} from 'src/scripts/cache/cache';\n\nimport {Logger} from './logger';\n\nexport async function getBetaVersionData(component: string) {\n  const data = await getCacheExecData<string>(\n    `npm view ${component} dist-tags --json`,\n    `Fetching ${component} tags`\n  );\n\n  return data;\n}\n\nexport function getPrefixComponent(component: string) {\n  return `@heroui/${component.replace('@heroui/', '')}`;\n}\n\nexport async function getBetaVersion(componentName: string) {\n  if (store.betaHeroUIComponentsPackageMap[componentName]) {\n    return store.betaHeroUIComponentsPackageMap[componentName]!.version;\n  }\n\n  const data = await getBetaVersionData(componentName);\n\n  try {\n    return JSON.parse(data).beta;\n  } catch (error) {\n    Logger.error(`Get beta version error: ${error}`);\n    process.exit(1);\n  }\n}\n\n/**\n * @example Input: [\"drawer\"]\n *\n * Return:\n * [\"@heroui/drawer@beta\"]\n */\nexport async function getBetaComponents(components: string[]) {\n  const componentsVersionList = await Promise.all(\n    components.map(getPrefixComponent).map(async (c) => {\n      const version = await getBetaVersion(c);\n\n      return `${getPrefixComponent(c)}@${version}`;\n    })\n  );\n\n  return componentsVersionList;\n}\n","import {existsSync} from 'node:fs';\n\nimport fg from 'fast-glob';\nimport {join} from 'pathe';\n\nimport {getPackageInfo} from '@helpers/package';\n\nimport {type HeroUIComponent, type HeroUIComponents} from './component';\nimport {resolver} from './path';\n\nexport const HEROUI_CLI = 'heroui-cli';\n\nexport const FRAMER_MOTION = 'framer-motion';\nexport const TAILWINDCSS = 'tailwindcss';\nexport const HERO_UI = '@heroui/react';\nexport const THEME_UI = '@heroui/theme';\nexport const SYSTEM_UI = '@heroui/system';\nexport const ALL_COMPONENTS_REQUIRED = [HERO_UI, FRAMER_MOTION] as const;\nexport const HEROUI_PREFIX = '@heroui';\n\nexport const DOCS_INSTALLED = 'https://heroui.com/docs/guide/installation#global-installation';\nexport const DOCS_TAILWINDCSS_SETUP =\n  'https://heroui.com/docs/guide/installation#tailwind-css-setup';\nexport const DOCS_APP_SETUP = 'https://heroui.com/docs/guide/installation#provider-setup';\nexport const DOCS_PNPM_SETUP = 'https://heroui.com/docs/guide/installation#setup-pnpm-optional';\nexport const DOCS_PROVIDER_SETUP = 'https://heroui.com/docs/guide/installation#provider-setup';\n\n// Record the required content of tailwind.config file\nexport const tailwindRequired = {\n  checkPluginsRegex: /heroui(([\\W\\w]+)?)/,\n  content: './node_modules/@heroui/theme/dist/**/*.{js,ts,jsx,tsx}',\n  darkMode: 'darkMode: \"class\"',\n  importContent: (isTypescript = false) => {\n    if (isTypescript) {\n      return `import {heroui} from '@heroui/theme';`;\n    }\n\n    return `const {heroui} = require('@heroui/theme');`;\n  },\n  plugins: 'heroui()'\n} as const;\n\nexport const individualTailwindRequired = {\n  content: (currentComponents: HeroUIComponents, isPnpm: boolean) => {\n    currentComponents.forEach((component) => {\n      const walkDeps = walkDepComponents(component, isPnpm) as HeroUIComponents;\n\n      currentComponents.push(...walkDeps);\n    });\n\n    const outputComponents = [\n      ...new Set(\n        currentComponents.map((component) => {\n          return component.style || component.name;\n        })\n      )\n    ];\n\n    if (outputComponents.length === 1) {\n      return `./node_modules/@heroui/theme/dist/components/${outputComponents[0]}.js`;\n    }\n    const requiredContent = outputComponents\n      .reduce((acc, component) => {\n        return (acc += `${component}|`);\n      }, '')\n      .replace(/\\|$/, '');\n\n    return `./node_modules/@heroui/theme/dist/components/(${requiredContent}).js`;\n  },\n  plugins: 'heroui()'\n} as const;\n\nexport const appRequired = {\n  import: 'HeroUIProvider'\n} as const;\n\nexport const pnpmRequired = {\n  content: 'public-hoist-pattern[]=*@heroui/*'\n} as const;\n\nexport function walkDepComponents(heroUIComponent: HeroUIComponent, isPnpm: boolean) {\n  const component = heroUIComponent.name;\n  let componentPath = resolver(`node_modules/@heroui/${component}`);\n  const components = [heroUIComponent];\n\n  if (!existsSync(componentPath) && isPnpm) {\n    const pnpmDir = resolver('node_modules/.pnpm');\n\n    const file = fg.sync(`**/@heroui/${component}`, {\n      absolute: true,\n      cwd: pnpmDir,\n      onlyDirectories: true\n    })[0];\n\n    if (file) {\n      componentPath = file;\n    } else {\n      return components;\n    }\n  }\n\n  const {currentComponents} = getPackageInfo(join(componentPath, 'package.json'));\n\n  if (currentComponents.length) {\n    for (const component of currentComponents) {\n      const result = walkDepComponents(component, isPnpm);\n\n      components.push(...result);\n    }\n  }\n\n  return components;\n}\n","import type {UpgradeOption} from './actions/upgrade/upgrade-types';\n\nimport {readFileSync} from 'node:fs';\n\nimport {type HeroUIComponents} from 'src/constants/component';\nimport {HERO_UI} from 'src/constants/required';\nimport {store} from 'src/constants/store';\nimport {getCacheExecData} from 'src/scripts/cache/cache';\nimport {getLatestVersion} from 'src/scripts/helpers';\n\nimport {Logger} from './logger';\nimport {colorMatchRegex} from './output-info';\nimport {getVersionAndMode} from './utils';\n\n/**\n * Get the package information\n * @param packagePath string\n * @param transformVersion boolean\n */\nexport function getPackageInfo(packagePath: string, transformVersion = true) {\n  let pkg;\n\n  try {\n    pkg = JSON.parse(readFileSync(packagePath, 'utf-8'));\n  } catch (error) {\n    Logger.prefix('error', `Error reading package.json file: ${packagePath} \\nError: ${error}`);\n  }\n\n  const devDependencies = pkg.devDependencies || {};\n  const dependencies = pkg.dependencies || {};\n  const allDependencies = {...devDependencies, ...dependencies};\n  const allDependenciesKeys = new Set(Object.keys(allDependencies));\n\n  const currentComponents = (store.heroUIComponents as unknown as HeroUIComponents)\n    .map((component) => {\n      let version = component.version;\n      let versionMode = component.versionMode;\n\n      if (allDependenciesKeys.has(component.package)) {\n        const data = getVersionAndMode(allDependencies, component.package);\n\n        version = transformVersion ? `${data.currentVersion} new: ${version}` : data.currentVersion;\n        versionMode = data.versionMode;\n      }\n\n      return {\n        ...component,\n        version,\n        versionMode\n      };\n    })\n    .filter((component) => allDependenciesKeys.has(component.package)) as HeroUIComponents;\n  const isAllComponents = allDependenciesKeys.has(HERO_UI);\n\n  return {\n    allDependencies,\n    allDependenciesKeys,\n    currentComponents,\n    dependencies,\n    devDependencies,\n    isAllComponents,\n    packageJson: pkg\n  };\n}\n\nexport function transformComponentsToPackage(components: string[]) {\n  return components.map((component) => {\n    const herouiComponent = store.heroUIComponentsMap[component];\n    const packageName = herouiComponent?.package;\n\n    return packageName ? packageName : component;\n  });\n}\n\n/**\n * Get the package detail information\n * @param components need package name\n * @param allDependencies\n * @returns\n */\nexport async function transformPackageDetail(\n  components: string[],\n  allDependencies: Record<string, string>,\n  transformVersion = true\n): Promise<HeroUIComponents> {\n  const result: HeroUIComponents = [];\n\n  for (const component of components) {\n    let {currentVersion} = getVersionAndMode(allDependencies, component);\n    const {versionMode} = getVersionAndMode(allDependencies, component);\n    const docs = (\n      ((await getCacheExecData(`npm show ${component} homepage`)) || '') as string\n    ).replace(/\\n/, '');\n    const description = (\n      ((await getCacheExecData(`npm show ${component} description`)) || '') as string\n    ).replace(/\\n/, '');\n    const latestVersion =\n      store.heroUIComponentsPackageMap[component]?.version || (await getLatestVersion(component));\n\n    currentVersion = transformVersion ? `${currentVersion} new: ${latestVersion}` : currentVersion;\n\n    const detailPackageInfo: HeroUIComponents[0] = {\n      description: description || '',\n      docs: docs || '',\n      name: component,\n      package: component,\n      peerDependencies: {},\n      status: 'stable',\n      style: '',\n      version: currentVersion,\n      versionMode: versionMode\n    };\n\n    result.push(detailPackageInfo);\n  }\n\n  return result;\n}\n\n/**\n * Get the complete version\n * @example getCompleteVersion({latestVersion: '1.0.0', versionMode: '^'}) --> '^1.0.0'\n */\nexport function getCompleteVersion(upgradeOption: UpgradeOption) {\n  return `${upgradeOption.versionMode || ''}${upgradeOption.latestVersion.replace(\n    colorMatchRegex,\n    ''\n  )}`;\n}\n","import type {ExtractStoreData, SAFE_ANY} from '@helpers/type';\n\nimport {getBetaVersion} from '@helpers/beta';\nimport {type Components, getLatestVersion} from 'src/scripts/helpers';\n\nimport {HEROUI_CLI, HERO_UI} from './required';\n\nexport type HeroUIComponentsMap = Record<string, Components[0]>;\n\nexport type Store = {\n  debug: boolean;\n  beta: boolean;\n  cliLatestVersion: string;\n  latestVersion: string;\n  betaVersion: string;\n\n  // HeroUI\n  heroUIComponents: Components;\n  heroUIComponentsKeys: string[];\n  heroUIcomponentsPackages: string[];\n  heroUIComponentsKeysSet: Set<string>;\n  heroUIComponentsMap: HeroUIComponentsMap;\n  heroUIComponentsPackageMap: HeroUIComponentsMap;\n\n  // Beta HeroUI\n  betaHeroUIComponents: Components;\n  betaHeroUIIComponentsKeys: string[];\n  betaHeroUIcomponentsPackages: string[];\n  betaHeroUIComponentsKeysSet: Set<string>;\n  betaHeroUIComponentsMap: HeroUIComponentsMap;\n  betaHeroUIComponentsPackageMap: HeroUIComponentsMap;\n};\n\n/* eslint-disable sort-keys-fix/sort-keys-fix, sort-keys */\nexport const store = {\n  debug: false,\n  beta: false,\n  cliLatestVersion: '',\n  latestVersion: '',\n  betaVersion: '',\n\n  betaHeroUIComponents: [],\n  betaHeroUIIComponentsKeys: [],\n  betaHeroUIComponentsKeysSet: new Set(),\n  betaHeroUIComponentsMap: {},\n  betaHeroUIComponentsPackageMap: {},\n  betaHeroUIcomponentsPackages: [],\n\n  heroUIComponents: [],\n  heroUIComponentsKeys: [],\n  heroUIComponentsKeysSet: new Set(),\n  heroUIComponentsMap: {},\n  heroUIComponentsPackageMap: {},\n  heroUIcomponentsPackages: []\n} as Store;\n/* eslint-enable sort-keys-fix/sort-keys-fix, sort-keys */\n\nexport type StoreKeys = keyof Store;\n\nexport async function getStore<T extends StoreKeys = StoreKeys>(\n  key: T\n): Promise<ExtractStoreData<T>> {\n  let data = store[key];\n\n  if (!data) {\n    if (key === 'latestVersion') {\n      data = (await getLatestVersion(HERO_UI)) as SAFE_ANY;\n\n      store[key] = data;\n    } else if (key === 'cliLatestVersion') {\n      data = (await getLatestVersion(HEROUI_CLI)) as SAFE_ANY;\n\n      store[key] = data;\n    } else if (key === 'betaVersion') {\n      data = (await getBetaVersion(HERO_UI)) as SAFE_ANY;\n\n      store[key] = data;\n    }\n  }\n\n  return data as unknown as Promise<ExtractStoreData<T>>;\n}\n\nexport function getStoreSync<T extends StoreKeys = StoreKeys>(key: T) {\n  return store[key] as unknown as ExtractStoreData<T>;\n}\n","import type {Components} from 'src/scripts/helpers';\n\nimport {store} from './store';\n\nexport function getHerouiComponentsData(heroUIComponents: Components) {\n  const heroUIComponentsKeys = heroUIComponents.map((component) => component.name);\n  const heroUIcomponentsPackages = heroUIComponents.map((component) => component.package);\n\n  const heroUIComponentsKeysSet = new Set(heroUIComponentsKeys);\n\n  const heroUIComponentsMap = heroUIComponents.reduce((acc, component) => {\n    acc[component.name] = component;\n\n    return acc;\n  }, {} as HeroUIComponentsMap);\n  const heroUIComponentsPackageMap = heroUIComponents.reduce((acc, component) => {\n    acc[component.package] = component;\n\n    return acc;\n  }, {} as HeroUIComponentsMap);\n\n  return {\n    heroUIComponentsKeys,\n    heroUIComponentsKeysSet,\n    heroUIComponentsMap,\n    heroUIComponentsPackageMap,\n    heroUIcomponentsPackages\n  };\n}\n\nexport function initStoreComponentsData({\n  beta,\n  heroUIComponents\n}: {\n  beta: boolean;\n  heroUIComponents: Components;\n}) {\n  const {\n    heroUIComponentsKeys,\n    heroUIComponentsKeysSet,\n    heroUIComponentsMap,\n    heroUIComponentsPackageMap,\n    heroUIcomponentsPackages\n  } = getHerouiComponentsData(heroUIComponents);\n\n  if (beta) {\n    store.betaHeroUIComponents = heroUIComponents;\n    store.betaHeroUIIComponentsKeys = heroUIComponentsKeys;\n    store.betaHeroUIComponentsKeysSet = heroUIComponentsKeysSet;\n    store.betaHeroUIComponentsMap = heroUIComponentsMap;\n    store.betaHeroUIComponentsPackageMap = heroUIComponentsPackageMap;\n    store.betaHeroUIcomponentsPackages = heroUIcomponentsPackages;\n  } else {\n    store.heroUIComponents = heroUIComponents;\n    store.heroUIComponentsKeys = heroUIComponentsKeys;\n    store.heroUIComponentsKeysSet = heroUIComponentsKeysSet;\n    store.heroUIComponentsMap = heroUIComponentsMap;\n    store.heroUIComponentsPackageMap = heroUIComponentsPackageMap;\n    store.heroUIcomponentsPackages = heroUIcomponentsPackages;\n  }\n}\n\nexport type HeroUIComponentsMap = Record<string, (typeof store.heroUIComponents)[number]>;\n\nexport const orderHeroUIComponentKeys = ['package', 'version', 'status', 'docs'] as const;\n\nexport const colorHeroUIComponentKeys = ['package', 'version', 'status'];\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type HeroUIComponentStatus = 'stable' | 'updated' | 'new' | (string & {});\n\nexport type HeroUIComponent = (typeof store.heroUIComponents)[0];\n\nexport type HeroUIComponents = (Omit<HeroUIComponent, 'status'> & {\n  status: HeroUIComponentStatus;\n  versionMode: string;\n})[];\n\n/**\n * Get the component data\n * isBeta --> betaHeroUIComponents\n * isStable --> heroUIComponents\n */\nexport function getConditionComponentData() {\n  if (store.beta) {\n    return {\n      components: store.betaHeroUIComponents,\n      componentsKeys: store.betaHeroUIIComponentsKeys,\n      componentsKeysSet: store.betaHeroUIComponentsKeysSet,\n      componentsMap: store.betaHeroUIComponentsMap,\n      componentsPackageMap: store.betaHeroUIComponentsPackageMap,\n      componentsPackages: store.betaHeroUIcomponentsPackages\n    };\n  }\n\n  return {\n    components: store.heroUIComponents,\n    componentsKeys: store.heroUIComponentsKeys,\n    componentsKeysSet: store.heroUIComponentsKeysSet,\n    componentsMap: store.heroUIComponentsMap,\n    componentsPackageMap: store.heroUIComponentsPackageMap,\n    componentsPackages: store.heroUIcomponentsPackages\n  };\n}\n","import type {SAFE_ANY} from '@helpers/type';\n\nimport {readdirSync, statSync} from 'node:fs';\n\nimport {\n  type ConfirmOptions,\n  spinner as _spinner,\n  cancel,\n  confirm,\n  isCancel,\n  multiselect,\n  select,\n  text\n} from '@clack/prompts';\nimport chalk from 'chalk';\nimport {join} from 'pathe';\n\nexport const cancelClack = (value: SAFE_ANY) => {\n  if (isCancel(value)) {\n    cancel(`${chalk.red('')} Operation cancelled`);\n    process.exit(0);\n  }\n};\n\nexport const textClack: typeof text = async (opts) => {\n  const result = (await text(opts)) as string;\n\n  cancelClack(result);\n\n  return result;\n};\n\nexport const selectClack: typeof select = async (opts) => {\n  const result = await select(opts);\n\n  cancelClack(result);\n\n  return result;\n};\n\nexport const multiselectClack: typeof multiselect = async (opts) => {\n  const result = await multiselect(opts);\n\n  cancelClack(result);\n\n  return result;\n};\n\nexport const spinner = _spinner();\n\nexport interface TaskClackOptions<T> {\n  text: string;\n  task: PromiseLike<T> | T;\n  successText?: string;\n  failText?: string;\n}\n\nexport const taskClack = async <T>(opts: TaskClackOptions<T>) => {\n  const {failText, successText, task, text} = opts;\n\n  let result: string | null = null;\n\n  try {\n    spinner.start(text);\n    result = await (task instanceof Promise ? task : Promise.resolve(task));\n    spinner.stop(successText);\n  } catch (error) {\n    cancel(failText ?? result ?? 'Task failed');\n    process.exit(0);\n  }\n\n  return result;\n};\n\nexport const confirmClack = async (opts: ConfirmOptions) => {\n  const result = await confirm(opts);\n\n  cancelClack(result);\n\n  return result;\n};\n\nexport const getDirectoryClack = async () => {\n  const currentDirectories = readdirSync(process.cwd()).filter((dir) =>\n    statSync(join(process.cwd(), dir)).isDirectory()\n  );\n  const options = currentDirectories\n    .map((dir) => ({\n      label: dir,\n      value: dir\n    }))\n    .filter(\n      (dir) =>\n        !['node_modules', 'dist', 'build', 'output', /^\\./].some((ignore) => {\n          if (typeof ignore === 'string') {\n            return dir.value.includes(ignore);\n          }\n\n          return ignore.test(dir.value);\n        })\n    );\n  const result = options.length\n    ? await selectClack({\n        message: 'Please select the directory to add the codebase',\n        options\n      })\n    : 'src';\n\n  return result as string;\n};\n","/**\n * Get the base storage url from the given url\n */\nexport async function getBaseStorageUrl(url: string) {\n  const httpMatch = url.match(/^https?:\\/\\//)?.[0] ?? '';\n  const [baseUrl, userId, chatId, sandboxId, chatTitle] = url.replace(httpMatch, '').split('/');\n\n  const baseStorageUrl = `${httpMatch}${baseUrl}/sandbox/files/${chatId}?sandboxId=${sandboxId}`;\n\n  return {\n    baseStorageUrl,\n    chatTitle,\n    sandboxId,\n    userId: userId ?? ''\n  };\n}\n","import {basename} from 'node:path';\nimport {Readable} from 'node:stream';\nimport {pipeline} from 'node:stream/promises';\n\nimport retry from 'async-retry';\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport tar from 'tar';\n\n/**\n * Fetch the tar stream from the specified URL.\n * @param url\n */\nasync function fetchTarStream(url: string) {\n  const res = await fetch(url);\n\n  if (!res.body) {\n    throw new Error(`Failed to download: ${url}`);\n  }\n\n  return Readable.fromWeb(res.body);\n}\n\n/**\n * Download the template from the specified URL and extract it to the specified directory.\n * @param root\n * @param url\n */\nexport async function downloadTemplate(root: string, url: string) {\n  await retry(\n    async (bail) => {\n      try {\n        await pipeline(\n          await fetchTarStream(url),\n          tar.x({\n            cwd: root\n          })\n        );\n      } catch (error) {\n        bail(new Error(`Failed to download ${url} Error: ${error}`));\n      }\n    },\n    {\n      retries: 3\n    }\n  );\n}\n\nexport async function fetchRequest(\n  url: string,\n  options?: RequestInit & {fetchInfo?: string; throwError?: boolean}\n): Promise<Response> {\n  const {fetchInfo, throwError = true, ...rest} = options ?? {};\n  const text = `Fetching ${fetchInfo ?? basename(url)}`;\n  const spinner = ora({\n    discardStdin: false,\n    spinner: {\n      frames: [\n        ` ${chalk.gray(`${text}.`)}`,\n        ` ${chalk.gray(`${text}..`)}`,\n        ` ${chalk.gray(`${text}...`)}`,\n        ` ${chalk.gray(`${text}.`)}`,\n        ` ${chalk.gray(`${text}..`)}`,\n        ` ${chalk.gray(`${text}...`)}`,\n        ` ${chalk.gray(`${text}.`)}`,\n        ` ${chalk.gray(`${text}..`)}`,\n        ` ${chalk.gray(`${text}...`)}`,\n        ` ${chalk.gray(`${text}.`)}`\n      ],\n      interval: 150\n    }\n  });\n\n  spinner.start();\n\n  try {\n    return await retry(\n      async () => {\n        const response = await fetch(url, {\n          ...rest,\n          headers: {\n            Accept: 'application/json',\n            ...rest?.headers\n          }\n        });\n\n        if (!response.ok && throwError) {\n          throw new Error(`Request failed with status ${response.status}`);\n        }\n\n        return response;\n      },\n      {\n        retries: 2\n      }\n    );\n  } catch (error) {\n    if (error instanceof Error && error.message.includes('fetch failed')) {\n      throw new Error('Connection failed. Please check your network connection.');\n    }\n\n    throw error;\n  } finally {\n    spinner.stop();\n  }\n}\n","import type {SAFE_ANY} from '@helpers/type';\n\nimport {fetchRequest} from '@helpers/fetch';\n\nexport const CODEBASE_FILES = [\n  'index.html',\n  'package.json',\n  'postcss.config.js',\n  'src/App.tsx',\n  'src/index.css',\n  'src/main.tsx',\n  'tailwind.config.js',\n  'tsconfig.json',\n  'vite.config.ts'\n];\n\nexport interface CodeBaseFile {\n  name: string;\n  type: 'file' | 'directory';\n  isSymlink: boolean;\n  content: string;\n}\n\nexport async function getCodeBaseFiles(url: string, userId: string): Promise<CodeBaseFile[]> {\n  const response = await fetchRequest(url, {\n    fetchInfo: 'codebase files',\n    headers: {userId}\n  });\n\n  const data = await response.json();\n\n  return ((data as SAFE_ANY).entries ?? {}) as CodeBaseFile[];\n}\n","import type {CodeBaseFile} from './get-codebase-files';\n\nimport {basename} from 'node:path';\n\nimport {Logger} from '@helpers/logger';\nimport {getMatchImport} from '@helpers/match';\n\nexport function getRelatedImports(fileContent: string) {\n  const matchImport = getMatchImport(fileContent);\n  const result = matchImport\n    .map((imports) => imports.find((target) => target.includes('./')))\n    .filter(Boolean);\n\n  return result as string[];\n}\n\nexport interface FetchAllRelatedFilesParams {\n  content: string;\n  entries: CodeBaseFile[];\n  filePath: string;\n}\n\nexport async function fetchAllRelatedFiles(params: FetchAllRelatedFilesParams) {\n  const {content: fileContent, entries, filePath} = params;\n  const result: {filePath: string; fileContent: string; fileName: string}[] = [];\n\n  async function fetchRelatedImports(fileContent: string) {\n    const relatedImports = getRelatedImports(fileContent);\n\n    if (relatedImports.length === 0) return;\n\n    // Add related imports\n    await Promise.all(\n      relatedImports.map(async (relatedPath) => {\n        const targetFile = entries?.find((file) => {\n          return basename(file.name).includes(basename(relatedPath));\n        });\n        const suffix = targetFile?.name.split('.').pop();\n        const fileName = `${relatedPath.split('/').pop()}`;\n        const filePath = `src/${relatedPath.replace(/.*?\\//, '')}${suffix ? `.${suffix}` : ''}`;\n\n        if (result.some((file) => file.fileName === fileName)) return;\n\n        const fileContent = targetFile?.content ?? '';\n\n        result.push({\n          fileContent,\n          fileName,\n          filePath\n        });\n\n        await fetchRelatedImports(fileContent);\n      })\n    );\n  }\n\n  try {\n    await fetchRelatedImports(fileContent);\n\n    result.push({\n      fileContent,\n      fileName: filePath.split('/').pop()!,\n      filePath\n    });\n  } catch (error) {\n    Logger.error(error);\n    process.exit(1);\n  }\n\n  return result;\n}\n","/**\n * Get the content of the key in the target string.\n * @example getMatchImport('import {test} from \"source\"') => [['test', 'source']]\n * @param str\n */\nexport function getMatchImport(str: string) {\n  const importRegexAll = /import {?\\s*([\\W\\w]+?)\\s*}? from [\"'](.+)[\"']/g;\n\n  const matchAll = str.match(importRegexAll) ?? [];\n  const result: string[][] = [];\n\n  for (const item of matchAll) {\n    result.push(matchImport(item));\n  }\n\n  return result.length ? result : [];\n\n  function matchImport(itemImport: string) {\n    const importRegex = /import {?\\s*([\\W\\w]+?)\\s*}? from [\"'](.+)[\"']/;\n    const match = itemImport.match(importRegex) ?? [];\n\n    return [match[1] ?? '', match[2] ?? ''];\n  }\n}\n\nfunction removeQuote(str: string) {\n  return str.replace(/^[\"'`](.*)[\"'`]$/, '$1');\n}\n\n/**\n * Get the array content of the key in the target string.\n * @example getMatchArray('key', 'key: [a, b, c]') => ['a', 'b', 'c']\n * @param key\n * @param target\n */\nexport function getMatchArray(key: string, target: string) {\n  const mixinReg = new RegExp(`\\\\s*${key}:\\\\s\\\\[([\\\\w\\\\W]*?)\\\\]\\\\s*`);\n\n  if (mixinReg.test(target))\n    return (\n      target\n        .match(mixinReg)?.[1]\n        ?.split(/,\\s/g)\n        .map((i) => removeQuote(i.trim()))\n        .filter(Boolean) ?? []\n    );\n\n  return [];\n}\n\n/**\n * Replace the array content of the key in the target string.\n * @example replaceMatchArray('key', 'key: [a, b, c]', ['d', 'e', 'f']) => 'key: [d, e, f]'\n * @param key\n * @param target\n * @param value\n */\nexport function replaceMatchArray(\n  key: string,\n  target: string,\n  value: string[],\n  _replaceValue?: string\n) {\n  const mixinReg = new RegExp(`\\\\s*${key}:\\\\s\\\\[([\\\\w\\\\W]*?)\\\\]\\\\s*`);\n  const replaceValue = _replaceValue ?? value.map((v) => JSON.stringify(v)).join(', ');\n\n  if (mixinReg.test(target)) {\n    const _value = key === 'content' ? `\\n  ${key}: [${replaceValue}]` : `\\n  ${key}: [${value}]`;\n\n    return target.replace(mixinReg, _value);\n  }\n\n  // If the key does not exist, add the key and value to the end of the target\n  const targetArray = target.split('\\n');\n  const contentIndex = targetArray.findIndex((item) => item.includes('content:'));\n  const moduleIndex = targetArray.findIndex((item) => item.includes('module.exports ='));\n  const insertIndex = contentIndex !== -1 ? contentIndex - 1 : moduleIndex !== -1 ? moduleIndex : 0;\n\n  key === 'content'\n    ? targetArray.splice(insertIndex + 1, 0, `  ${key}: [${replaceValue}],`)\n    : targetArray.splice(insertIndex + 1, 0, `  ${key}: [${value.map((v) => removeQuote(v))}],`);\n\n  return targetArray.join('\\n');\n}\n","import fs from 'node:fs';\n\nexport function writeFilesWithMkdir(directory: string, file: string, content: string) {\n  if (file.includes('/')) {\n    const path = file.split('/').slice(0, -1).join('/');\n\n    fs.mkdirSync(`${directory}/${path}`, {recursive: true});\n    fs.writeFileSync(`${directory}/${file}`, content, 'utf8');\n  } else {\n    fs.writeFileSync(`${directory}/${file}`, content, 'utf8');\n  }\n}\n","import {Logger} from './logger';\n\nfunction matchTextScore(text: string, pattern: string) {\n  let score = 0;\n  const textLength = text.length;\n  const patternLength = pattern.length;\n  let i = 0;\n  let j = 0;\n\n  while (i < textLength && j < patternLength) {\n    if (text[i] === pattern[j]) {\n      score++;\n      j++;\n    }\n\n    i++;\n  }\n\n  return score;\n}\n\nexport function findMostMatchText(list: string[], pattern: string) {\n  let maxScore = 0;\n  let result = '';\n\n  for (const text of list) {\n    const score = matchTextScore(text, pattern);\n\n    if (score > maxScore) {\n      maxScore = score;\n      result = text;\n    }\n  }\n\n  return result !== '' ? result : null;\n}\n\nexport function printMostMatchText(list: string[], pattern: string) {\n  const mathOption = findMostMatchText(list, pattern);\n\n  if (mathOption) {\n    Logger.error(`Unknown option '${pattern}', Did you mean '${mathOption}'?`);\n  } else {\n    Logger.error(`Unknown option '${pattern}'`);\n  }\n  process.exit(1);\n}\n","{\n  \"name\": \"heroui-cli\",\n  \"private\": false,\n  \"type\": \"module\",\n  \"license\": \"MIT\",\n  \"version\": \"1.2.3\",\n  \"homepage\": \"https://github.com/heroui-inc/heroui-cli#readme\",\n  \"description\": \"A CLI tool that unlocks seamless HeroUI integration (Previously NextUI CLI)\",\n  \"keywords\": [\n    \"UI\",\n    \"CLI\",\n    \"Tool\",\n    \"NextUI\",\n    \"Template\",\n    \"Integration\",\n    \"Add Component\",\n    \"HeroUI\"\n  ],\n  \"author\": {\n    \"name\": \"HeroUI\",\n    \"email\": \"support@heroui.com\",\n    \"url\": \"https://github.com/heroui-inc\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/heroui-inc/heroui-cli.git\"\n  },\n  \"bugs\": {\n    \"url\": \"https://github.com/heroui-inc/heroui-cli/issues\"\n  },\n  \"publishConfig\": {\n    \"access\": \"public\",\n    \"registry\": \"https://registry.npmjs.org/\"\n  },\n  \"files\": [\n    \"dist\"\n  ],\n  \"bin\": {\n    \"heroui\": \"./dist/index.js\"\n  },\n  \"main\": \"./dist/index.js\",\n  \"module\": \"./dist/index.js\",\n  \"types\": \"./dist/index.d.ts\",\n  \"scripts\": {\n    \"dev\": \"tsup --watch\",\n    \"link:cli\": \"pnpm link --global\",\n    \"link:remove\": \"pnpm uninstall --global heroui-cli\",\n    \"build\": \"tsup\",\n    \"update:components\": \"tsx src/scripts/update/update-components.ts\",\n    \"sync:docs\": \"tsx src/scripts/sync/sync.ts\",\n    \"clean:cache\": \"tsx src/scripts/cache/clean.ts\",\n    \"lint\": \"eslint . --max-warnings=0\",\n    \"lint:fix\": \"eslint . --max-warnings=0 --fix\",\n    \"check:prettier\": \"prettier --check .\",\n    \"check:types\": \"tsc --noEmit\",\n    \"changelog\": \"npx conventional-changelog -p angular -i CHANGELOG.md -s --commit-path .\",\n    \"release\": \"bumpp --execute='pnpm run changelog' --all\",\n    \"prepare\": \"husky install\",\n    \"prebuild\": \"pnpm run update:components\",\n    \"prepublishOnly\": \"pnpm run build\"\n  },\n  \"dependencies\": {\n    \"@clack/prompts\": \"0.7.0\",\n    \"@winches/prompts\": \"0.0.7\",\n    \"async-retry\": \"1.3.3\",\n    \"chalk\": \"5.3.0\",\n    \"commander\": \"11.0.0\",\n    \"compare-versions\": \"6.1.1\",\n    \"fast-glob\": \"3.3.2\",\n    \"find-up\": \"7.0.0\",\n    \"gradient-string\": \"2.0.2\",\n    \"ora\": \"8.0.1\",\n    \"pathe\": \"1.1.2\",\n    \"tar\": \"6.2.1\"\n  },\n  \"devDependencies\": {\n    \"@commitlint/cli\": \"17.7.1\",\n    \"@commitlint/config-conventional\": \"17.7.0\",\n    \"@types/gradient-string\": \"1.1.3\",\n    \"@types/node\": \"20.11.30\",\n    \"@typescript-eslint/eslint-plugin\": \"6.7.2\",\n    \"@typescript-eslint/parser\": \"6.7.2\",\n    \"bumpp\": \"9.4.0\",\n    \"clean-package\": \"2.2.0\",\n    \"commitlint-plugin-function-rules\": \"2.0.2\",\n    \"conventional-changelog-cli\": \"4.1.0\",\n    \"eslint\": \"8.50.0\",\n    \"eslint-config-prettier\": \"9.0.0\",\n    \"eslint-import-resolver-typescript\": \"3.6.1\",\n    \"eslint-plugin-import\": \"2.28.1\",\n    \"eslint-plugin-prettier\": \"5.0.0\",\n    \"eslint-plugin-sort-destructure-keys\": \"1.5.0\",\n    \"eslint-plugin-sort-keys-fix\": \"1.1.2\",\n    \"eslint-plugin-unicorn\": \"52.0.0\",\n    \"eslint-plugin-unused-imports\": \"3.0.0\",\n    \"husky\": \"8.0.3\",\n    \"lint-staged\": \"14.0.1\",\n    \"prettier\": \"3.3.2\",\n    \"tsup\": \"7.2.0\",\n    \"tsx\": \"4.7.1\",\n    \"typescript\": \"5.2.2\"\n  },\n  \"engines\": {\n    \"pnpm\": \">=9.x\"\n  },\n  \"packageManager\": \"pnpm@9.6.0\"\n}\n","/* eslint-disable no-var */\nimport type {SAFE_ANY} from '@helpers/type';\n\nimport {existsSync, writeFileSync} from 'node:fs';\n\nimport chalk from 'chalk';\n\nimport {\n  type AddActionOptions,\n  addHeroChatCodebase,\n  isAddingHeroChatCodebase\n} from '@helpers/actions/add/heroui-chat/add-hero-chat-codebase';\nimport {getBetaComponents} from '@helpers/beta';\nimport {\n  checkApp,\n  checkIllegalComponents,\n  checkPnpm,\n  checkRequiredContentInstalled,\n  checkTailwind\n} from '@helpers/check';\nimport {debugAddedPkg, debugExecAddAction, debugRemovedPkg} from '@helpers/debug';\nimport {detect} from '@helpers/detect';\nimport {fixPnpm, fixProvider, fixTailwind} from '@helpers/fix';\nimport {Logger} from '@helpers/logger';\nimport {getPackageInfo} from '@helpers/package';\nimport {findFiles, strip} from '@helpers/utils';\nimport {resolver} from 'src/constants/path';\nimport {\n  DOCS_PROVIDER_SETUP,\n  HERO_UI,\n  individualTailwindRequired,\n  pnpmRequired\n} from 'src/constants/required';\nimport {getStoreSync, store} from 'src/constants/store';\nimport {tailwindTemplate} from 'src/constants/templates';\nimport {getAutocompleteMultiselect} from 'src/prompts';\n\nexport async function addAction(targets: string[], options: AddActionOptions) {\n  if (isAddingHeroChatCodebase(targets)) {\n    // Add HeroUI Chat codebase\n    await addHeroChatCodebase(targets, options);\n    process.exit(0);\n  }\n\n  const {\n    addApp = false,\n    all = false,\n    appPath,\n    beta = false,\n    packagePath = resolver('package.json'),\n    tailwindPath = findFiles('**/tailwind.config.(j|t)s')[0]\n  } = options;\n\n  var {allDependencies, allDependenciesKeys, currentComponents} = getPackageInfo(packagePath);\n  const prettier = options.prettier ?? allDependenciesKeys.has('prettier');\n\n  const isHeroUIAll = !!allDependencies[HERO_UI];\n\n  if (!targets.length && !all) {\n    const filteredComponents = store.heroUIComponents.filter(\n      (component) =>\n        !currentComponents.some((currentComponent) => currentComponent.name === component.name)\n    );\n\n    if (!filteredComponents.length) {\n      Logger.success(' All components have been added');\n      process.exit(0);\n    }\n\n    targets = await getAutocompleteMultiselect(\n      'Which components would you like to add?',\n      filteredComponents.map((component) => {\n        return {\n          description: component.description,\n          title: component.name,\n          value: component.name\n        };\n      })\n    );\n  } else if (all) {\n    targets = [HERO_UI];\n  }\n\n  /** ======================== Add judge whether illegal component exist ======================== */\n  if (!all && !checkIllegalComponents(targets, true)) {\n    return;\n  }\n\n  // Check whether have added the HeroUI components\n  var {allDependenciesKeys, currentComponents} = getPackageInfo(packagePath);\n\n  const currentComponentsKeys = currentComponents.map((c) => c.name);\n  const filterCurrentComponents = targets.filter(\n    (c) => currentComponentsKeys.includes(c) || (isHeroUIAll && c === HERO_UI)\n  );\n\n  if (filterCurrentComponents.length && !getStoreSync('debug')) {\n    Logger.prefix(\n      'error',\n      ` You have already added the following components: ${filterCurrentComponents\n        .map((c) => chalk.underline(c))\n        .join(', ')}`\n    );\n\n    return;\n  }\n\n  // Check whether the App.tsx file exists\n  if (addApp && !appPath) {\n    Logger.prefix(\n      'error',\n      \" App.(j|t)sx file not found. Please specify the appPath if the default search path does not locate your file.  'add --appPath=yourAppPath'\"\n    );\n\n    return;\n  }\n\n  const currentPkgManager = await detect();\n  const runCmd = currentPkgManager === 'npm' ? 'install' : 'add';\n\n  /** ======================== Step 1 Add dependencies required ======================== */\n  if (all) {\n    let [, ...missingDependencies] = await checkRequiredContentInstalled(\n      'all',\n      allDependenciesKeys,\n      {allDependencies, beta, packageNames: [HERO_UI], peerDependencies: true}\n    );\n\n    missingDependencies = missingDependencies.map((c) => strip(c));\n\n    if (missingDependencies.length) {\n      Logger.info(\n        `Adding required dependencies: ${[...missingDependencies]\n          .map((c) => chalk.underline(c))\n          .join(', ')}`\n      );\n\n      await debugExecAddAction(\n        `${currentPkgManager} ${runCmd} ${[...missingDependencies].join(' ')}`,\n        missingDependencies\n      );\n    }\n  } else {\n    const mergedComponents = beta\n      ? await getBetaComponents(targets)\n      : targets.map((c) => store.heroUIComponentsMap[c]!.package);\n    const [, ..._missingDependencies] = await checkRequiredContentInstalled(\n      'partial',\n      allDependenciesKeys,\n      {\n        allDependencies,\n        beta,\n        packageNames: mergedComponents,\n        peerDependencies: true\n      }\n    );\n    const missingDependencies = [..._missingDependencies, ...mergedComponents].map((c) => strip(c));\n\n    Logger.info(\n      `Adding required dependencies: ${[...missingDependencies]\n        .map((c) => chalk.underline(c))\n        .join(', ')}`\n    );\n\n    await debugExecAddAction(\n      `${currentPkgManager} ${runCmd} ${[...missingDependencies].join(' ')}`,\n      missingDependencies\n    );\n  }\n\n  if (getStoreSync('debug')) {\n    // Temporarily add the components to the package.json file\n    debugAddedPkg(targets, packagePath);\n  }\n\n  // After install the required dependencies, get the latest package information\n  var {allDependenciesKeys, currentComponents} = getPackageInfo(packagePath);\n\n  /** ======================== Step 2 Tailwind CSS Setup ======================== */\n  const type: SAFE_ANY = all ? 'all' : 'partial';\n\n  const isPnpm = currentPkgManager === 'pnpm';\n\n  if (!tailwindPath) {\n    const individualContent = individualTailwindRequired.content(currentComponents, isPnpm);\n    const template = tailwindTemplate(type, individualContent);\n    const tailwindPath = resolver('tailwind.config.js');\n\n    writeFileSync(tailwindPath, template, 'utf-8');\n\n    Logger.newLine();\n    Logger.info(`Tailwind CSS configuration file created at: ${tailwindPath}`);\n  } else {\n    const [, ...errorInfoList] = checkTailwind(\n      type,\n      tailwindPath,\n      currentComponents,\n      isPnpm,\n      undefined,\n      true\n    );\n\n    fixTailwind(type, {errorInfoList, format: prettier, tailwindPath});\n\n    Logger.newLine();\n    Logger.log(`Tailwind CSS settings have been updated in: ${tailwindPath}`);\n  }\n\n  /** ======================== Step 3 Provider Need Manually Open ======================== */\n  if (addApp && appPath && existsSync(appPath)) {\n    const [isCorrectProvider] = checkApp(type, appPath);\n\n    if (!isCorrectProvider) {\n      fixProvider(appPath, {format: prettier});\n\n      Logger.newLine();\n      Logger.info(`HeroUIProvider successfully added to the App file at: ${appPath}`);\n      Logger.warn(\n        \"Please check the placement of HeroUIProvider in the App file to ensure it's correctly integrated.'\"\n      );\n    }\n  }\n\n  /** ======================== Step 4 Setup Pnpm ======================== */\n  if (currentPkgManager === 'pnpm') {\n    const npmrcPath = resolver('.npmrc');\n\n    if (!existsSync(npmrcPath)) {\n      writeFileSync(resolver('.npmrc'), pnpmRequired.content, 'utf-8');\n    } else {\n      const [isCorrectPnpm] = checkPnpm(npmrcPath);\n\n      if (!isCorrectPnpm) {\n        fixPnpm(npmrcPath);\n      }\n    }\n  }\n\n  // Finish adding the HeroUI components\n  Logger.newLine();\n  Logger.success(' Components added successfully');\n\n  // Check whether the user has installed the All HeroUI components\n  if ((allDependenciesKeys.has(HERO_UI) || all) && currentComponents.length) {\n    // Check whether have added redundant dependencies\n    Logger.newLine();\n    Logger.log(\n      `${chalk.yellow('Attention')} Individual components from HeroUI do not require the \\`@heroui/react\\` package. For optimized bundle sizes, consider using individual components.`\n    );\n    Logger.log('The redundant dependencies are:');\n    [...new Set(currentComponents)].forEach((component) => {\n      Logger.log(`- ${component.package}`);\n    });\n  }\n\n  // Warn the user to check the HeroUIProvider whether in the correct place\n  Logger.newLine();\n  Logger.grey(\n    `Please check the ${chalk.bold(\n      'HeroUIProvider'\n    )} whether in the correct place (ignore if added)\\nSee more info here: ${DOCS_PROVIDER_SETUP}`\n  );\n\n  if (getStoreSync('debug')) {\n    // Temporarily remove the added components from the package.json file\n    debugRemovedPkg(targets, packagePath);\n  }\n  process.exit(0);\n}\n","import type {PartialKey, RequiredKey, SAFE_ANY} from './type';\nimport type {ProblemRecord} from 'src/actions/doctor-action';\n\nimport {readFileSync} from 'node:fs';\n\nimport chalk from 'chalk';\n\nimport {type HeroUIComponents} from 'src/constants/component';\nimport {\n  DOCS_INSTALLED,\n  DOCS_TAILWINDCSS_SETUP,\n  FRAMER_MOTION,\n  HERO_UI,\n  SYSTEM_UI,\n  TAILWINDCSS,\n  THEME_UI,\n  appRequired,\n  individualTailwindRequired,\n  pnpmRequired,\n  tailwindRequired\n} from 'src/constants/required';\nimport {store} from 'src/constants/store';\nimport {compareVersions} from 'src/scripts/helpers';\n\nimport {getPeerPackageVersion} from './actions/add/get-peer-pakcage-version';\nimport {getBetaVersionData} from './beta';\nimport {Logger} from './logger';\nimport {getMatchArray, getMatchImport} from './match';\nimport {findMostMatchText} from './math-diff';\nimport {getPackagePeerDep} from './upgrade';\nimport {strip} from './utils';\n\nexport type CheckType = 'all' | 'partial';\nexport type CombineType = 'missingDependencies' | 'incorrectTailwind' | 'incorrectApp';\n\ntype DefaultCombineOptions = {\n  errorInfo: string[];\n  missingDependencies: string[];\n  tailwindName: string;\n};\n\ntype CombineOptions<T extends CombineType> = T extends 'missingDependencies'\n  ? RequiredKey<Partial<DefaultCombineOptions>, 'missingDependencies'>\n  : T extends 'incorrectTailwind'\n    ? RequiredKey<Partial<DefaultCombineOptions>, 'errorInfo' | 'tailwindName'>\n    : T extends 'incorrectApp'\n      ? RequiredKey<Partial<DefaultCombineOptions>, 'errorInfo'>\n      : DefaultCombineOptions;\n\ntype CheckResult<T extends SAFE_ANY[] = SAFE_ANY[]> = [boolean, ...T];\n\nexport function combineProblemRecord<T extends CombineType = CombineType>(\n  type: T,\n  options: CombineOptions<T>\n): ProblemRecord {\n  const {errorInfo, missingDependencies, tailwindName} = options as DefaultCombineOptions;\n\n  if (type === 'missingDependencies') {\n    return {\n      level: 'error',\n      name: 'missingDependencies',\n      outputFn: () => {\n        Logger.log('You have not installed the required dependencies');\n        Logger.newLine();\n        Logger.log('The required dependencies are:');\n        missingDependencies.forEach((dependency) => {\n          Logger.log(`- ${dependency}`);\n        });\n        Logger.newLine();\n        Logger.log(`See more info here: ${chalk.underline(DOCS_INSTALLED)}`);\n      }\n    };\n  } else if (type === 'incorrectTailwind') {\n    return {\n      level: 'error',\n      name: 'incorrectTailwind',\n      outputFn: () => {\n        Logger.log(`Your ${tailwindName} is incorrect`);\n        Logger.newLine();\n        Logger.log('The missing part is:');\n        errorInfo.forEach((info) => {\n          Logger.log(`- need to add ${info}`);\n        });\n        Logger.newLine();\n        Logger.log(`See more info here: ${chalk.underline(`${DOCS_TAILWINDCSS_SETUP}-1`)}`);\n      }\n    };\n  } else {\n    return {\n      level: 'error',\n      name: 'incorrectApp',\n      outputFn: () => {\n        Logger.log('Your App.tsx is incorrect');\n        Logger.newLine();\n        Logger.log('The missing part is:');\n        errorInfo.forEach((info) => {\n          Logger.log(`- need to add ${info}`);\n        });\n        Logger.newLine();\n        Logger.log(`See more info here: ${chalk.underline(DOCS_INSTALLED)}`);\n      }\n    };\n  }\n}\n\ninterface CheckPeerDependenciesConfig {\n  peerDependencies?: boolean;\n  allDependencies?: Record<string, SAFE_ANY>;\n  packageNames?: string[];\n  beta?: boolean;\n}\n\n/**\n * Check if the required content is installed\n * @example return result and missing required [false, '@heroui/react', 'framer-motion']\n * @param type\n * @param dependenciesKeys\n * @param checkPeerDependenciesConfig\n * @returns\n */\nexport async function checkRequiredContentInstalled<\n  T extends CheckPeerDependenciesConfig = CheckPeerDependenciesConfig\n>(\n  type: CheckType,\n  dependenciesKeys: Set<string>,\n  checkPeerDependenciesConfig?: T extends {peerDependencies: infer P}\n    ? P extends true\n      ? PartialKey<Required<CheckPeerDependenciesConfig>, 'beta'>\n      : T\n    : T\n): Promise<CheckResult> {\n  const result = [] as unknown as CheckResult;\n  const {allDependencies, beta, packageNames, peerDependencies} = (checkPeerDependenciesConfig ??\n    {}) as Required<CheckPeerDependenciesConfig>;\n  const peerDependenciesList: string[] = [];\n  const hasFramerMotion = dependenciesKeys.has(FRAMER_MOTION);\n  const hasTailwind = dependenciesKeys.has(TAILWINDCSS);\n  const minTailwindVersion = `${TAILWINDCSS}@${getPeerPackageVersion(TAILWINDCSS)}`;\n\n  if (peerDependencies) {\n    const peerDepList = await checkPeerDependencies({allDependencies, packageNames});\n\n    peerDependenciesList.push(...peerDepList);\n  }\n\n  if (type === 'all') {\n    const hasAllComponents = dependenciesKeys.has(HERO_UI);\n\n    if (hasAllComponents && hasFramerMotion && hasTailwind && !peerDependenciesList.length) {\n      return [true];\n    }\n    !hasAllComponents && result.push(beta ? `${HERO_UI}@${store.betaVersion}` : HERO_UI);\n    !hasFramerMotion && result.push(FRAMER_MOTION);\n    !hasTailwind && result.push(minTailwindVersion);\n  } else if (type === 'partial') {\n    const hasSystemUI = dependenciesKeys.has(SYSTEM_UI);\n    const hasThemeUI = dependenciesKeys.has(THEME_UI);\n\n    if (\n      hasFramerMotion &&\n      hasSystemUI &&\n      hasThemeUI &&\n      hasTailwind &&\n      !peerDependenciesList.length\n    ) {\n      return [true];\n    }\n    const betaSystemUI = await getBetaVersionData(SYSTEM_UI);\n    const betaThemeUI = await getBetaVersionData(THEME_UI);\n\n    !hasFramerMotion && result.push(FRAMER_MOTION);\n    !hasSystemUI && result.push(beta ? `${SYSTEM_UI}@${betaSystemUI}` : SYSTEM_UI);\n    !hasThemeUI && result.push(beta ? `${THEME_UI}@${betaThemeUI}` : THEME_UI);\n    !hasTailwind && result.push(minTailwindVersion);\n  }\n\n  return [false, ...result, ...(peerDependencies ? peerDependenciesList : [])];\n}\n\nexport async function checkPeerDependencies(\n  config: Required<Pick<CheckPeerDependenciesConfig, 'allDependencies' | 'packageNames'>>\n) {\n  const {allDependencies, packageNames} = config;\n  const peerDepList: string[] = [];\n\n  for (const packageName of packageNames) {\n    const result = await getPackagePeerDep(packageName, allDependencies, new Set());\n\n    for (const peerData of result) {\n      if (!peerData.isLatest) {\n        // If there are not the latest version, add the peerDependencies to the list\n        const findPeerDepIndex = peerDepList.findIndex((peerDep) =>\n          peerDep.includes(peerData.package)\n        );\n        const findPeerDep = strip(peerDepList[findPeerDepIndex] || '');\n        const findPeerDepVersion = findPeerDep?.match(/@([\\d.]+)/)?.[1];\n\n        // If the peerDependencies is not the latest version, remove the old version and add the latest version\n        if (\n          findPeerDepVersion &&\n          compareVersions(findPeerDepVersion, strip(peerData.latestVersion)) <= 0\n        ) {\n          peerDepList.splice(findPeerDepIndex, 1);\n        }\n        peerDepList.push(`${peerData.package}@${peerData.latestVersion}`);\n      }\n    }\n  }\n\n  return peerDepList;\n}\n\n/**\n * Check if the tailwind.config file is correct\n * @param type\n * @param tailwindPath\n * @param currentComponents\n * @returns\n */\nexport function checkTailwind(\n  type: 'all',\n  tailwindPath: string,\n  currentComponents?: HeroUIComponents,\n  isPnpm?: boolean,\n  content?: string,\n  logWarning?: boolean\n): CheckResult;\nexport function checkTailwind(\n  type: 'partial',\n  tailwindPath: string,\n  currentComponents: HeroUIComponents,\n  isPnpm: boolean,\n  content?: string,\n  logWarning?: boolean\n): CheckResult;\nexport function checkTailwind(\n  type: CheckType,\n  tailwindPath: string,\n  currentComponents?: HeroUIComponents,\n  isPnpm?: boolean,\n  content?: string,\n  logWarning?: boolean\n): CheckResult {\n  if (type === 'partial' && !currentComponents!.length) {\n    return [true];\n  }\n\n  const result = [] as unknown as CheckResult;\n\n  const tailwindContent = content ?? readFileSync(tailwindPath, 'utf-8');\n\n  const contentMatch = getMatchArray('content', tailwindContent);\n  const pluginsMatch = getMatchArray('plugins', tailwindContent);\n\n  if (type === 'all') {\n    // Check if the required content is added Detail: https://heroui.com/docs/guide/installation#global-installation\n    const darkMatch = getMatchArray('darkMode', tailwindContent);\n    // Some tailwind.config.js use darkMode: 'class' not darkMode: ['class']\n    const isDarkModeCorrect =\n      darkMatch.some((darkMode) => darkMode.includes('class')) ||\n      /darkMode:\\s*[\"'`]class/.test(tailwindContent);\n    const isContentCorrect = contentMatch.some(\n      (content) => content.includes(tailwindRequired.content.replace('{js,ts,jsx,tsx}', '')) // Remove the suffix of the content for a better match\n    );\n    const isPluginsCorrect = pluginsMatch.some((plugins) =>\n      tailwindRequired.checkPluginsRegex.test(plugins)\n    );\n\n    if (isDarkModeCorrect && isContentCorrect && isPluginsCorrect) {\n      return [true];\n    }\n    !isDarkModeCorrect && result.push(tailwindRequired.darkMode);\n    !isContentCorrect && result.push(tailwindRequired.content);\n    !isPluginsCorrect && result.push(tailwindRequired.plugins);\n  } else if (type === 'partial') {\n    const individualContent = individualTailwindRequired.content(currentComponents!, isPnpm!);\n\n    let isHaveAllContent = false;\n    const isContentCorrect = contentMatch.some((content) => {\n      // Add tailwindRequired.content check to the contentMatch, cause it is all include in the individualContent\n      if (content.includes(tailwindRequired.content.replace('{js,ts,jsx,tsx}', ''))) {\n        isHaveAllContent = true;\n\n        return true;\n      }\n\n      return content.includes(individualContent);\n    });\n\n    if (logWarning && isHaveAllContent) {\n      Logger.log(\n        `\\n${chalk.yellow('Attention')} Individual components from HeroUI do not require the \"${chalk.bold(\n          tailwindRequired.content\n        )}\" in the tailwind config\\nFor optimized bundle sizes, consider using \"${chalk.bold(\n          individualContent\n        )}\" instead`\n      );\n    }\n\n    const isPluginsCorrect = pluginsMatch.some((plugins) =>\n      tailwindRequired.checkPluginsRegex.test(plugins)\n    );\n\n    if (isContentCorrect && isPluginsCorrect) {\n      return [true];\n    }\n    !isContentCorrect && result.push(individualContent);\n    !isPluginsCorrect && result.push(tailwindRequired.plugins);\n  }\n\n  return [false, ...result];\n}\n\nexport function checkApp(type: CheckType, appPath: string): CheckResult {\n  const result = [] as unknown as CheckResult;\n\n  if (type === 'all' || type === 'partial') {\n    const appContent = readFileSync(appPath, 'utf-8');\n\n    const importArray = getMatchImport(appContent);\n    const isAppCorrect = importArray.some(([key]) => key!.includes(appRequired.import));\n\n    if (isAppCorrect) {\n      return [true];\n    }\n\n    !isAppCorrect && result.push(appRequired.import);\n  }\n\n  return [false, ...result];\n}\n\nexport function checkPnpm(npmrcPath: string): CheckResult {\n  const result = [] as unknown as CheckResult;\n\n  let content: string;\n\n  if (npmrcPath) {\n    try {\n      content = readFileSync(npmrcPath, 'utf-8');\n      const isPnpmCorrect = content.includes(pnpmRequired.content);\n\n      if (isPnpmCorrect) {\n        return [true];\n      }\n\n      !isPnpmCorrect && result.push(pnpmRequired.content);\n    } catch (error) {\n      result.push(`Error reading .npmrc file: ${npmrcPath} \\nError: ${error}`);\n    }\n\n    return [false, ...result];\n  }\n\n  return [false, ...result];\n}\n\nexport async function checkIllegalComponents<T extends boolean = false>(\n  components: string[] = [],\n  loggerError = true\n): Promise<T extends false ? boolean : string[]> {\n  const illegalList: [string, null | string][] = [];\n\n  for (const component of components) {\n    if (!store.heroUIComponentsKeysSet.has(component)) {\n      const matchComponent = findMostMatchText(store.heroUIComponentsKeys, component);\n\n      illegalList.push([component, matchComponent]);\n    }\n  }\n\n  if (illegalList.length) {\n    const [illegalComponents, matchComponents] = illegalList.reduce(\n      (acc, [illegalComponent, matchComponent]) => {\n        return [\n          acc[0] + chalk.underline(illegalComponent) + ', ',\n          acc[1] + (matchComponent ? chalk.underline(matchComponent) + ', ' : '')\n        ];\n      },\n      ['', '']\n    );\n\n    loggerError &&\n      Logger.prefix(\n        'error',\n        `Illegal components: ${illegalComponents.replace(/, $/, '')}${\n          matchComponents\n            ? `\\n${''.padEnd(12)}It may be a typo, did you mean ${matchComponents.replace(\n                /, $/,\n                ''\n              )}?`\n            : ''\n        }`\n      );\n\n    return false as T extends false ? boolean : string[];\n  }\n\n  return true as T extends false ? boolean : string[];\n}\n","import {transformPeerVersion} from '@helpers/utils';\nimport {getConditionComponentData} from 'src/constants/component';\nimport {compareVersions} from 'src/scripts/helpers';\n\n/**\n * Find the peer package version\n * @param peerPackageName\n * @param isMinVersion default is true\n * @example\n * components: [\n *  {\n *    peerDependencies: {\n *      'react': '18.0.0'\n *    }\n *  },\n *  {\n *    peerDependencies: {\n *      'react': '18.2.0'\n *    }\n *  }\n * ]\n *\n * getPeerPackageVersion('react') --> 18.0.0\n * getPeerPackageVersion('react', false) --> 18.2.0\n */\nexport function getPeerPackageVersion(peerPackageName: string, isMinVersion = true) {\n  const components = getConditionComponentData().components;\n  const filerTargetPackages = components.filter(\n    (component) => component.peerDependencies[peerPackageName]\n  );\n  let version = '';\n\n  if (isMinVersion) {\n    const versionList = filerTargetPackages.map(\n      (component) => component.peerDependencies[peerPackageName]\n    );\n    const minVersion = versionList.reduce((min, version) => {\n      return compareVersions(min, version) > 0 ? version : min;\n    });\n\n    version = minVersion || '';\n  } else {\n    version = filerTargetPackages[0]?.version || '';\n  }\n\n  return transformPeerVersion(version);\n}\n","import type {\n  ExtractUpgrade,\n  MissingDepSetType,\n  Upgrade,\n  UpgradeOption\n} from './actions/upgrade/upgrade-types';\nimport type {SAFE_ANY} from './type';\n\nimport chalk from 'chalk';\n\nimport {HERO_UI, THEME_UI} from 'src/constants/required';\nimport {getCacheExecData} from 'src/scripts/cache/cache';\nimport {type Dependencies, compareVersions, getLatestVersion} from 'src/scripts/helpers';\n\nimport {getLibsData} from './actions/upgrade/get-libs-data';\nimport {getConditionVersion} from './condition-value';\nimport {Logger} from './logger';\nimport {colorMatchRegex, outputBox} from './output-info';\nimport {\n  fillAnsiLength,\n  getColorVersion,\n  getVersionAndMode,\n  isMajorUpdate,\n  isMinorUpdate,\n  strip,\n  transformPeerVersion,\n  versionModeRegex\n} from './utils';\n\nconst DEFAULT_SPACE = ''.padEnd(7);\n\nconst MISSING = 'Missing';\n\nexport async function upgrade<T extends Upgrade = Upgrade>(options: ExtractUpgrade<T>) {\n  const {all, allDependencies, isHeroUIAll, upgradeOptionList} = options as Required<Upgrade>;\n  let result: UpgradeOption[] = [];\n  const missingDepSet = new Set<MissingDepSetType>();\n\n  const allOutputData = await getAllOutputData(all, isHeroUIAll, allDependencies, missingDepSet);\n  const libsData = await getLibsData(allDependencies);\n\n  const transformUpgradeOptionList = upgradeOptionList.map((c) => ({\n    ...c,\n    latestVersion: getColorVersion(c.version, c.latestVersion)\n  }));\n\n  const upgradePeerList = await Promise.all(\n    upgradeOptionList.map((upgradeOption) =>\n      getPackagePeerDep(\n        upgradeOption.package,\n        allDependencies,\n        missingDepSet,\n        upgradeOption.peerDependencies\n      )\n    )\n  );\n\n  const missingDepList = await getPackageUpgradeData([...missingDepSet]);\n\n  const outputList = [...transformUpgradeOptionList, ...allOutputData.allOutputList];\n  const peerDepList = [\n    ...libsData,\n    ...upgradePeerList.flat(),\n    ...allOutputData.allPeerDepList,\n    ...missingDepList\n  ].filter(\n    (upgradeOption, index, arr) =>\n      index === arr.findIndex((c) => c.package === upgradeOption.package) &&\n      !outputList.some((c) => c.package === upgradeOption.package)\n  );\n\n  // Output dependencies box\n  outputDependencies(outputList, peerDepList);\n\n  result = [...outputList, ...peerDepList].filter(\n    (upgradeOption, index, arr) =>\n      !upgradeOption.isLatest && index === arr.findIndex((c) => c.package === upgradeOption.package)\n  );\n\n  // Output upgrade count\n  outputUpgradeCount(result);\n\n  return result;\n}\n\n/**\n * Get upgrade version\n * @param upgradeOptionList\n * @param peer Use for peerDependencies change the latest to fulfillment\n */\nexport function getUpgradeVersion(upgradeOptionList: UpgradeOption[], peer = false) {\n  if (!upgradeOptionList.length) {\n    return '';\n  }\n\n  const output: string[] = [];\n\n  const optionMaxLenMap = {\n    latestVersion: 0,\n    package: 0,\n    version: 0\n  };\n\n  for (const upgradeOption of upgradeOptionList) {\n    for (const key in upgradeOption) {\n      if (!Object.prototype.hasOwnProperty.call(upgradeOption, key) || !upgradeOption[key]) {\n        continue;\n      }\n\n      if (key === 'version') {\n        // Remove the duplicate character '^'\n        upgradeOption[key] = upgradeOption[key].replace(versionModeRegex, '');\n      }\n\n      const compareLength =\n        key === 'version'\n          ? upgradeOption[key].replace(colorMatchRegex, '').length\n          : upgradeOption[key].length;\n\n      optionMaxLenMap[key] = Math.max(optionMaxLenMap[key], compareLength);\n    }\n  }\n\n  for (const upgradeOption of upgradeOptionList) {\n    if (upgradeOption.isLatest) {\n      if (peer) {\n        // If it is peerDependencies, then skip output the latest version\n        continue;\n      }\n\n      output.push(\n        `  ${chalk.white(\n          `${`${upgradeOption.package}@${upgradeOption.versionMode || ''}${\n            upgradeOption.latestVersion\n          }`.padEnd(optionMaxLenMap.package + DEFAULT_SPACE.length + DEFAULT_SPACE.length)}`\n        )}${DEFAULT_SPACE}${chalk.greenBright('latest').padStart(optionMaxLenMap.version)}${DEFAULT_SPACE}`\n      );\n      continue;\n    }\n    output.push(\n      `  ${chalk.white(\n        `${upgradeOption.package.padEnd(\n          optionMaxLenMap.package + DEFAULT_SPACE.length\n        )}${DEFAULT_SPACE}${fillAnsiLength(\n          `${upgradeOption.versionMode || ''}${upgradeOption.version}`,\n          optionMaxLenMap.version\n        )}  ->  ${upgradeOption.versionMode || ''}${upgradeOption.latestVersion}`\n      )}${DEFAULT_SPACE}`\n    );\n  }\n\n  return output.join('\\n');\n}\n\nexport async function getPackagePeerDep(\n  packageName: string,\n  allDependencies: Dependencies,\n  missingDepList: Set<MissingDepSetType>,\n  peerDependencies?: Dependencies\n): Promise<UpgradeOption[]> {\n  peerDependencies =\n    peerDependencies ||\n    JSON.parse(\n      (await getCacheExecData(`npm show ${packageName} peerDependencies --json`)) as SAFE_ANY\n    ) ||\n    {};\n\n  if (!peerDependencies || !Object.keys(peerDependencies).length) {\n    return [];\n  }\n\n  const upgradeOptionList: UpgradeOption[] = [];\n\n  for (const [peerPackage, peerVersion] of Object.entries(peerDependencies)) {\n    if (upgradeOptionList.some((c) => c.package === peerPackage)) {\n      // Avoid duplicate\n      continue;\n    }\n\n    const currentVersion = allDependencies[peerPackage];\n    let formatPeerVersion = transformPeerVersion(peerVersion);\n\n    if (!currentVersion) {\n      missingDepList.add({name: peerPackage, version: formatPeerVersion});\n      continue;\n    }\n    const {versionMode} = getVersionAndMode(allDependencies, peerPackage);\n    const isLatest = compareVersions(currentVersion, formatPeerVersion) >= 0;\n\n    if (isLatest) {\n      formatPeerVersion = transformPeerVersion(currentVersion);\n    } else {\n      // If the current version is not the latest version, then get the latest version in upgrade command\n      formatPeerVersion = await getLatestVersion(peerPackage);\n    }\n\n    upgradeOptionList.push({\n      isLatest,\n      latestVersion: isLatest\n        ? formatPeerVersion\n        : getColorVersion(currentVersion, formatPeerVersion),\n      package: peerPackage,\n      version: currentVersion,\n      versionMode\n    });\n  }\n\n  return upgradeOptionList;\n}\n\nfunction outputDependencies(outputList: UpgradeOption[], peerDepList: UpgradeOption[]) {\n  const componentName = outputList.length === 1 ? 'Component' : 'Components';\n  const outputDefault = {\n    components: {color: 'blue', text: '', title: chalk.blue(componentName)},\n    peerDependencies: {color: 'yellow', text: '', title: chalk.yellow('PeerDependencies')}\n  } as const;\n\n  const outputInfo = getUpgradeVersion(outputList);\n  const outputPeerDepInfo = getUpgradeVersion(peerDepList, true);\n  const filterPeerDepList = peerDepList.filter((c) => !c.isLatest);\n\n  outputInfo.length && outputBox({...outputDefault.components, text: outputInfo});\n  Logger.newLine();\n  filterPeerDepList.length &&\n    Logger.log(\n      chalk.gray(\n        `Required min version: ${filterPeerDepList\n          .map((c) => {\n            return `${c.package}>=${c.latestVersion.replace(colorMatchRegex, '')}`;\n          })\n          .join(', ')}`\n      )\n    );\n  outputPeerDepInfo.length &&\n    outputBox({...outputDefault.peerDependencies, text: outputPeerDepInfo});\n}\n\n/**\n * Get all output data\n * @example\n * getAllOutputData(true, allDependencies, missingDepSet) --> {allOutputList: [], allPeerDepList: []}\n */\nexport async function getAllOutputData(\n  all: boolean,\n  isHeroUIAll: boolean,\n  allDependencies: Record<string, SAFE_ANY>,\n  missingDepSet: Set<MissingDepSetType>\n) {\n  if (!all || !isHeroUIAll) {\n    return {\n      allOutputList: [],\n      allPeerDepList: []\n    };\n  }\n\n  const latestVersion = await getConditionVersion(HERO_UI);\n\n  const {currentVersion, versionMode} = getVersionAndMode(allDependencies, HERO_UI);\n  const colorVersion = getColorVersion(currentVersion, latestVersion);\n  const isLatest = compareVersions(currentVersion, latestVersion) >= 0;\n\n  const heroUIPeerDepList = await getPackagePeerDep(HERO_UI, allDependencies, missingDepSet);\n  const heroUIThemePeerDepList = await getPackagePeerDep(THEME_UI, allDependencies, missingDepSet);\n\n  const allOutputList = [\n    {\n      isLatest,\n      latestVersion: colorVersion,\n      package: HERO_UI,\n      version: currentVersion,\n      versionMode\n    }\n  ];\n  const allPeerDepList = [...heroUIPeerDepList, ...heroUIThemePeerDepList];\n  const allOutputData = {\n    allOutputList,\n    allPeerDepList\n  };\n\n  return allOutputData;\n}\n\nexport async function getPackageUpgradeData(missingDepList: MissingDepSetType[]) {\n  const result: UpgradeOption[] = [];\n\n  for (const missingDep of missingDepList) {\n    const allOutputList = {\n      isLatest: false,\n      latestVersion: missingDep.version,\n      package: missingDep.name,\n      version: chalk.red(MISSING),\n      versionMode: ''\n    };\n\n    result.push(allOutputList);\n  }\n\n  return result;\n}\n\nfunction outputUpgradeCount(outputList: UpgradeOption[]) {\n  const count = {\n    major: 0,\n    minor: 0,\n    patch: 0\n  };\n\n  for (const component of outputList) {\n    if (component.version === MISSING) {\n      count.major++;\n      continue;\n    }\n    const stripLatestVersion = strip(component.latestVersion);\n\n    if (isMajorUpdate(component.version, stripLatestVersion)) {\n      count.major++;\n    } else if (isMinorUpdate(component.version, stripLatestVersion)) {\n      count.minor++;\n    } else {\n      count.patch++;\n    }\n  }\n\n  const outputInfo = Object.entries(count)\n    .reduce((acc, [key, value]) => {\n      if (!value) {\n        return acc;\n      }\n\n      return `${acc}${chalk.yellowBright(value)} ${key}, `;\n    }, '')\n    .replace(/, $/, '');\n\n  if (outputInfo) {\n    Logger.log(outputInfo);\n    Logger.newLine();\n  }\n\n  return count;\n}\n\nexport function writeUpgradeVersion({\n  dependencies,\n  devDependencies,\n  upgradePackageList\n}: {\n  dependencies: Dependencies;\n  devDependencies: Dependencies;\n  upgradePackageList: UpgradeOption[];\n}) {\n  for (const upgradePackage of upgradePackageList) {\n    const latestVersion = strip(upgradePackage.latestVersion);\n\n    if (devDependencies[upgradePackage.package]) {\n      devDependencies[upgradePackage.package] = latestVersion;\n      continue;\n    }\n    dependencies[upgradePackage.package] = latestVersion;\n  }\n}\n","import {store} from 'src/constants/store';\nimport {getLatestVersion} from 'src/scripts/helpers';\n\nimport {getBetaVersion} from './beta';\n\nexport async function getConditionVersion(packageName: string) {\n  const conditionVersion = store.beta\n    ? await getBetaVersion(packageName)\n    : await getLatestVersion(packageName);\n\n  return conditionVersion;\n}\n","import type {UpgradeOption} from './upgrade-types';\nimport type {SAFE_ANY} from '@helpers/type';\n\nimport {getConditionVersion} from '@helpers/condition-value';\nimport {getColorVersion, getVersionAndMode} from '@helpers/utils';\nimport {HEROUI_PREFIX} from 'src/constants/required';\nimport {store} from 'src/constants/store';\nimport {compareVersions} from 'src/scripts/helpers';\n\nexport async function getLibsData(\n  allDependencies: Record<string, SAFE_ANY>\n): Promise<UpgradeOption[]> {\n  const allDependenciesKeys = Object.keys(allDependencies);\n\n  const allLibs = allDependenciesKeys.filter((dependency) => {\n    return (\n      !store.heroUIcomponentsPackages.includes(dependency) && dependency.startsWith(HEROUI_PREFIX)\n    );\n  });\n\n  if (!allLibs.length) {\n    return [];\n  }\n\n  const libsData: UpgradeOption[] = await Promise.all(\n    allLibs.map(async (lib) => {\n      const {currentVersion, versionMode} = getVersionAndMode(allDependencies, lib);\n      const conditionVersion = await getConditionVersion(lib);\n      const isLatest = compareVersions(currentVersion, conditionVersion) >= 0;\n\n      return {\n        isLatest,\n        latestVersion: getColorVersion(\n          currentVersion,\n          isLatest ? currentVersion : conditionVersion\n        ),\n        package: lib,\n        version: currentVersion,\n        versionMode\n      };\n    })\n  );\n\n  return libsData;\n}\n","import {writeFileSync} from 'node:fs';\n\nimport {getStoreSync, store} from 'src/constants/store';\n\nimport {catchPnpmExec} from './actions/upgrade/catch-pnpm-exec';\nimport {exec} from './exec';\nimport {Logger} from './logger';\nimport {getPackageInfo} from './package';\n\nexport async function debugExecAddAction(cmd: string, components: string[] = []) {\n  if (getStoreSync('debug')) {\n    for (const component of components) {\n      Logger.warn(`Debug: ${component}`);\n    }\n  } else {\n    await catchPnpmExec(() => exec(cmd));\n  }\n}\n\nexport function debugAddedPkg(components: string[], packagePath: string) {\n  if (!components.length || !getStoreSync('debug')) return;\n\n  const {dependencies, packageJson} = getPackageInfo(packagePath);\n\n  for (const component of components) {\n    const compData = store.heroUIComponentsMap[component];\n\n    if (!compData) continue;\n\n    dependencies[compData.package] = `${compData.package}@${compData.version}`;\n  }\n  writeFileSync(\n    packagePath,\n    JSON.stringify(\n      {\n        ...packageJson,\n        dependencies\n      },\n      null,\n      2\n    ),\n    'utf-8'\n  );\n}\n\nexport function debugRemovedPkg(components: string[], packagePath: string) {\n  if (!components.length || !getStoreSync('debug')) return;\n\n  const {dependencies, packageJson} = getPackageInfo(packagePath);\n\n  for (const component of components) {\n    const compData = store.heroUIComponentsMap[component];\n\n    if (!compData) continue;\n    delete dependencies[compData.package];\n  }\n  writeFileSync(\n    packagePath,\n    JSON.stringify(\n      {\n        ...packageJson,\n        dependencies\n      },\n      null,\n      2\n    ),\n    'utf-8'\n  );\n}\n","import chalk from 'chalk';\n\nimport {exec} from '@helpers/exec';\nimport {selectClack} from 'src/prompts/clack';\n\nexport async function catchPnpmExec(execFn: () => Promise<unknown>) {\n  try {\n    await execFn();\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  } catch (error: any) {\n    if (error) {\n      const reRunPnpm = await selectClack({\n        message: `${chalk.red('Error: ')}a unexpected error occurred, run \"pnpm install\" maybe can fix it or report it as a bug`,\n        options: [\n          {label: 'Re-run pnpm install', value: 're-run-pnpm-install'},\n          {label: 'Exit', value: 'exit'}\n        ]\n      });\n\n      if (reRunPnpm === 'exit') {\n        process.exit(1);\n      }\n\n      await exec('pnpm install --force');\n      await execFn();\n    }\n  }\n}\n","import type {CheckType} from './check';\n\nimport {execSync} from 'node:child_process';\nimport {existsSync, readFileSync, writeFileSync} from 'node:fs';\n\nimport {pnpmRequired, tailwindRequired} from 'src/constants/required';\nimport {getStoreSync} from 'src/constants/store';\n\nimport {Logger} from './logger';\nimport {getMatchArray, replaceMatchArray} from './match';\n\ninterface FixTailwind {\n  errorInfoList: string[];\n  tailwindPath: string;\n  write?: boolean;\n  format?: boolean;\n}\n\ninterface FixProvider {\n  write?: boolean;\n  format?: boolean;\n}\n\nexport function fixProvider(appPath: string, options: FixProvider) {\n  const {format = false, write = true} = options;\n  let appContent = readFileSync(appPath, 'utf-8');\n\n  appContent = `import {HeroUIProvider} from \"@heroui/react\";\\n${appContent}`;\n\n  appContent = wrapWithHeroUIProvider(appContent);\n\n  write && writeFileSync(appPath, appContent, 'utf-8');\n  format && execSync(`npx prettier --write ${appPath}`, {stdio: 'ignore'});\n}\n\nfunction wrapWithHeroUIProvider(content: string) {\n  const returnRegex = /return\\s*\\(([\\S\\s]*?)\\);/g;\n  const wrappedCode = content.replace(returnRegex, (_, p1) => {\n    return `return (\n      <HeroUIProvider>\n        ${p1.trim()}\n      </HeroUIProvider>\n    );`;\n  });\n\n  return wrappedCode;\n}\n\nexport function fixTailwind(type: CheckType, options: FixTailwind) {\n  const {errorInfoList, format = false, tailwindPath, write = true} = options;\n\n  if (!errorInfoList.length) {\n    return;\n  }\n\n  let tailwindContent = readFileSync(tailwindPath, 'utf-8');\n  let contentMatch = getMatchArray('content', tailwindContent);\n  const pluginsMatch = getMatchArray('plugins', tailwindContent);\n\n  for (const errorInfo of errorInfoList) {\n    const [errorType, info] = transformErrorInfo(errorInfo);\n\n    if (errorType === 'content') {\n      // Check if all the required content is added then skip\n      const allPublic = contentMatch.includes(tailwindRequired.content);\n\n      if (allPublic) continue;\n\n      contentMatch = contentMatch.filter((content) => !content.includes('@heroui/theme/dist/'));\n      contentMatch.push(info);\n      tailwindContent = replaceMatchArray(\n        'content',\n        tailwindContent,\n        contentMatch,\n        contentMatch\n          .map((v, index, arr) => {\n            // Add 4 spaces before the content\n            if (index === 0) {\n              if (arr.length === 1) {\n                return `\\n    ${JSON.stringify(v)}\\n`;\n              }\n\n              return `\\n    ${JSON.stringify(v)}`;\n            }\n            if (arr.length - 1 === index) {\n              return `    ${JSON.stringify(v)}\\n  `;\n            }\n\n            return `    ${JSON.stringify(v)}`;\n          })\n          .join(',\\n')\n      );\n    } else if (errorType === 'plugins') {\n      pluginsMatch.push(info);\n      tailwindContent = replaceMatchArray('plugins', tailwindContent, pluginsMatch);\n\n      // Add import content\n      const importContent = tailwindRequired.importContent(tailwindPath.endsWith('.ts'));\n\n      tailwindContent = `${importContent}\\n${tailwindContent}`;\n    }\n\n    if (type === 'all' && errorType === 'darkMode') {\n      // Add darkMode under the plugins content in tailwindContent\n      const darkModeIndex = tailwindContent.indexOf('plugins') - 1;\n      const darkModeContent = tailwindRequired.darkMode;\n\n      tailwindContent = `${tailwindContent.slice(\n        0,\n        darkModeIndex\n      )} ${darkModeContent},\\n${tailwindContent.slice(darkModeIndex)}`;\n    }\n  }\n\n  write && writeFileSync(tailwindPath, tailwindContent, 'utf-8');\n\n  if (format) {\n    try {\n      execSync(`npx prettier --write ${tailwindPath}`, {stdio: 'ignore'});\n    } catch (error) {\n      Logger.warn(`Prettier failed to format ${tailwindPath}`);\n    }\n  }\n}\n\nfunction transformErrorInfo(errorInfo: string): [keyof typeof tailwindRequired, string] {\n  if (tailwindRequired.darkMode.includes(errorInfo)) {\n    return ['darkMode', errorInfo];\n  } else if (tailwindRequired.plugins.includes(errorInfo)) {\n    return ['plugins', errorInfo];\n  } else {\n    return ['content', errorInfo];\n  }\n}\n\nexport function fixPnpm(\n  npmrcPath: string,\n  write = true,\n  runInstall = true,\n  logger: (({message, runInstall}) => void) | undefined = undefined\n) {\n  if (!existsSync(npmrcPath)) {\n    write && writeFileSync(npmrcPath, pnpmRequired.content, 'utf-8');\n  } else {\n    let content = readFileSync(npmrcPath, 'utf-8');\n\n    content = `${pnpmRequired.content}\\n${content}`;\n\n    write && writeFileSync(npmrcPath, content, 'utf-8');\n  }\n\n  if (!logger) {\n    Logger.newLine();\n    Logger.log(`Added the required content in file: ${npmrcPath}`);\n\n    if (runInstall && !getStoreSync('debug')) {\n      Logger.newLine();\n      Logger.log('Pnpm restructure will be run now');\n      execSync('pnpm install', {stdio: 'inherit'});\n    }\n\n    return;\n  }\n\n  // Custom logger\n  logger({message: `Added the required content in file: ${npmrcPath}`, runInstall});\n}\n","import type {CheckType} from '@helpers/check';\n\nexport const APP_REPO = 'https://codeload.github.com/heroui-inc/next-app-template/tar.gz/main';\nexport const PAGES_REPO = 'https://codeload.github.com/heroui-inc/next-pages-template/tar.gz/main';\nexport const VITE_REPO = 'https://codeload.github.com/heroui-inc/vite-template/tar.gz/main';\nexport const REMIX_REPO = 'https://codeload.github.com/heroui-inc/remix-template/tar.gz/main';\nexport const LARAVEL_REPO =\n  'https://github.com/heroui-inc/laravel-template/archive/refs/heads/master.zip';\n\nexport const APP_DIR = 'next-app-template-main';\nexport const PAGES_DIR = 'next-pages-template-main';\nexport const VITE_DIR = 'vite-template-main';\nexport const REMIX_DIR = 'remix-template-main';\nexport const LARAVEL_DIR = 'laravel-template-main';\n\nexport const APP_NAME = 'next-app-template';\nexport const PAGES_NAME = 'next-pages-template';\nexport const VITE_NAME = 'vite-template';\nexport const REMIX_NAME = 'remix-template';\nexport const LARAVEL_NAME = 'laravel-template';\nexport const DEFAULT_PROJECT_NAME = 'heroui-app';\n\nexport function tailwindTemplate(type: 'all', content?: string): string;\nexport function tailwindTemplate(type: 'partial', content: string): string;\nexport function tailwindTemplate(type: CheckType, content?: string) {\n  if (type === 'all') {\n    return `// tailwind.config.js\nconst {heroui} = require(\"@heroui/react\");\n\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    \"./node_modules/@heroui/theme/dist/**/*.{js,ts,jsx,tsx}\",\n  ],\n  theme: {\n    extend: {},\n  },\n  darkMode: \"class\",\n  plugins: [heroui()],\n};`;\n  } else {\n    return `// tailwind.config.js\nconst {heroui} = require(\"@heroui/theme\");\n\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    ${JSON.stringify(content)},\n  ],\n  theme: {\n    extend: {},\n  },\n  darkMode: \"class\",\n  plugins: [heroui()],\n};`;\n  }\n}\n","import chalk from 'chalk';\nimport {basename} from 'pathe';\n\nimport {\n  checkApp,\n  checkPnpm,\n  checkRequiredContentInstalled,\n  checkTailwind,\n  combineProblemRecord\n} from '@helpers/check';\nimport {detect} from '@helpers/detect';\nimport {Logger, type PrefixLogType} from '@helpers/logger';\nimport {getPackageInfo} from '@helpers/package';\nimport {findFiles, strip, transformOption} from '@helpers/utils';\nimport {resolver} from 'src/constants/path';\nimport {DOCS_PNPM_SETUP, DOCS_TAILWINDCSS_SETUP, HERO_UI} from 'src/constants/required';\n\ninterface DoctorActionOptions {\n  packagePath?: string;\n  tailwindPath?: string;\n  appPath?: string;\n  checkApp?: boolean | 'false';\n  checkTailwind?: boolean | 'false';\n  checkPnpm?: boolean | 'false';\n}\n\nexport interface ProblemRecord {\n  name: string;\n  level: Extract<PrefixLogType, 'error' | 'warn'>;\n  outputFn: () => void;\n}\n\nexport async function doctorAction(options: DoctorActionOptions) {\n  const {\n    appPath = findFiles('**/App.(j|t)sx')[0],\n    checkApp: _enableCheckApp = false,\n    checkPnpm: _enableCheckPnpm = true,\n    checkTailwind: _enableCheckTailwind = true,\n    packagePath = resolver('package.json'),\n    tailwindPath = findFiles('**/tailwind.config.(j|t)s')\n  } = options;\n  const enableCheckApp = transformOption(_enableCheckApp);\n  const enableCheckPnpm = transformOption(_enableCheckPnpm);\n  const enableCheckTailwind = transformOption(_enableCheckTailwind);\n  const tailwindPaths = [tailwindPath].flat();\n\n  const {allDependencies, allDependenciesKeys, currentComponents, isAllComponents} =\n    getPackageInfo(packagePath);\n\n  /** ======================== Output when there is no components installed ======================== */\n  if (!currentComponents.length && !isAllComponents) {\n    Logger.prefix(\n      'error',\n      ` No ${chalk.underline(\n        'HeroUI components'\n      )} found in your project. Please consult the installation guide at: https://heroui.com/docs/guide/installation#global-installation`\n    );\n\n    return;\n  }\n\n  /** ======================== Problem record ======================== */\n  const problemRecord: ProblemRecord[] = [];\n\n  /** ======================== Check whether installed redundant dependencies ======================== */\n  if (isAllComponents && currentComponents.length) {\n    problemRecord.push({\n      level: 'warn',\n      name: 'redundantDependencies',\n      outputFn: () => {\n        Logger.log(\n          'You have installed some unnecessary dependencies. Consider removing them for optimal performance.'\n        );\n        Logger.newLine();\n        Logger.log('The following dependencies are redundant:');\n        currentComponents.forEach((component) => {\n          Logger.log(`- ${component.package}`);\n        });\n      }\n    });\n  }\n  // If there is no tailwind.config file\n  if (enableCheckTailwind && !tailwindPaths.length) {\n    problemRecord.push({\n      level: 'error',\n      name: 'missingTailwind',\n      outputFn: () => {\n        Logger.log(\n          'Missing tailwind.config.(j|t)s file. To set up, visit: ' +\n            chalk.underline(DOCS_TAILWINDCSS_SETUP)\n        );\n      }\n    });\n  }\n  // If there is no App.tsx\n  if (enableCheckApp && !appPath) {\n    problemRecord.push({\n      level: 'error',\n      name: 'missingApp',\n      outputFn: () => {\n        Logger.log(\n          'App.(j|t)sx file not found. Please specify the path using: doctor --appPath=[yourAppPath]'\n        );\n      }\n    });\n  }\n\n  /** ======================== Check if the allComponents required dependencies installed ======================== */\n  if (isAllComponents) {\n    // Check if framer-motion allComponents is installed\n    let [isCorrectInstalled, ...missingDependencies] = await checkRequiredContentInstalled(\n      'all',\n      allDependenciesKeys,\n      {allDependencies, packageNames: [HERO_UI], peerDependencies: true}\n    );\n\n    // Check if other allComponents are installed\n    if (currentComponents.length) {\n      const [_isCorrectInstalled, ..._missingDependencies] = await checkRequiredContentInstalled(\n        'partial',\n        allDependenciesKeys,\n        {\n          allDependencies,\n          packageNames: currentComponents.map((c) => c.package),\n          peerDependencies: true\n        }\n      );\n\n      isCorrectInstalled = _isCorrectInstalled || isCorrectInstalled;\n      // Combine missing dependencies\n      missingDependencies = [..._missingDependencies, ...missingDependencies].filter(\n        (c, index, arr) => {\n          c = strip(c).replace(/@[\\d.]+/g, '');\n\n          return arr.findIndex((d) => strip(d).replace(/@[\\d.]+/g, '') === c) === index;\n        }\n      );\n    }\n\n    if (!isCorrectInstalled) {\n      problemRecord.push(combineProblemRecord('missingDependencies', {missingDependencies}));\n    }\n\n    // Check whether tailwind.config file is correct\n    if (enableCheckTailwind) {\n      for (const tailwindPath of tailwindPaths) {\n        const [isCorrectTailwind, ...errorInfo] = checkTailwind('all', tailwindPath);\n\n        if (!isCorrectTailwind) {\n          const tailwindName = basename(tailwindPath);\n\n          problemRecord.push(combineProblemRecord('incorrectTailwind', {errorInfo, tailwindName}));\n        }\n      }\n    }\n\n    // Check whether the App.tsx is correct\n    if (enableCheckApp && appPath) {\n      const [isAppCorrect, ...errorInfo] = checkApp('all', appPath);\n\n      if (!isAppCorrect) {\n        problemRecord.push(combineProblemRecord('incorrectApp', {errorInfo}));\n      }\n    }\n  } else if (currentComponents.length) {\n    // Individual components check\n    const [isCorrectInstalled, ...missingDependencies] = await checkRequiredContentInstalled(\n      'partial',\n      allDependenciesKeys,\n      {\n        allDependencies,\n        packageNames: currentComponents.map((c) => c.package),\n        peerDependencies: true\n      }\n    );\n\n    if (!isCorrectInstalled) {\n      problemRecord.push(combineProblemRecord('missingDependencies', {missingDependencies}));\n    }\n\n    // Check whether tailwind.config file is correct\n    if (enableCheckTailwind) {\n      const isPnpm = (await detect()) === 'pnpm';\n\n      for (const tailwindPath of tailwindPaths) {\n        const [isCorrectTailwind, ...errorInfo] = checkTailwind(\n          'partial',\n          tailwindPath,\n          currentComponents,\n          isPnpm,\n          undefined,\n          true\n        );\n\n        if (!isCorrectTailwind) {\n          const tailwindName = basename(tailwindPath);\n\n          problemRecord.push(combineProblemRecord('incorrectTailwind', {errorInfo, tailwindName}));\n        }\n      }\n    }\n\n    // Check whether the App.tsx is correct\n    if (enableCheckApp && appPath) {\n      const [isAppCorrect, ...errorInfo] = checkApp('partial', appPath);\n\n      if (!isAppCorrect) {\n        problemRecord.push(combineProblemRecord('incorrectApp', {errorInfo}));\n      }\n    }\n  }\n\n  /** ======================== Check whether Pnpm setup is correct ======================== */\n  if (enableCheckPnpm) {\n    const currentPkgManager = await detect();\n\n    if (currentPkgManager === 'pnpm') {\n      const npmrcPath = resolver('.npmrc');\n\n      const [isCorrect, ...errorInfo] = checkPnpm(npmrcPath);\n\n      if (!isCorrect) {\n        problemRecord.push({\n          level: 'error',\n          name: 'incorrectPnpm',\n          outputFn: () => {\n            Logger.log(\n              'The pnpm setup is incorrect \\nPlease update your configuration according to the guidelines provided at: ' +\n                chalk.underline(DOCS_PNPM_SETUP)\n            );\n            Logger.newLine();\n            Logger.log('Required changes:');\n            errorInfo.forEach((info) => {\n              Logger.log(`- Add ${info}`);\n            });\n          }\n        });\n      }\n    }\n  }\n\n  /** ======================== Return when there is no problem ======================== */\n  if (!problemRecord.length) {\n    Logger.newLine();\n    Logger.success(' Your project has no detected issues.');\n\n    return;\n  }\n\n  /** ======================== Output the problem record ======================== */\n  Logger.prefix(\n    'error',\n    ` Your project has ${chalk.underline(problemRecord.length)} issue${\n      problemRecord.length === 1 ? '' : 's'\n    } that require attention`\n  );\n  Logger.newLine();\n\n  for (let index = 0; index < problemRecord.length; index++) {\n    const problem = problemRecord[index] as ProblemRecord;\n\n    Logger[problem.level](`Issue ${index + 1}: ${chalk.bold(problem.name)}`);\n    Logger.newLine();\n    problem.outputFn();\n    Logger.newLine();\n  }\n\n  process.exit(0);\n}\n","import {outputComponents, outputInfo} from '@helpers/output-info';\nimport {getPackageInfo} from '@helpers/package';\nimport {resolver} from 'src/constants/path';\n\ninterface EnvActionOptions {\n  packagePath?: string;\n}\n\nexport async function envAction(options: EnvActionOptions) {\n  const {packagePath = resolver('package.json')} = options;\n\n  const {currentComponents} = getPackageInfo(packagePath);\n\n  /** ======================== Output the current components ======================== */\n  outputComponents({components: currentComponents});\n\n  /** ======================== Output the system environment info ======================== */\n  outputInfo();\n\n  process.exit(0);\n}\n","import type {Agent} from '@helpers/detect';\nimport type {GetUnionLastValue} from '@helpers/type';\n\nimport {existsSync, renameSync} from 'node:fs';\n\nimport * as p from '@clack/prompts';\nimport chalk from 'chalk';\nimport {join} from 'pathe';\n\nimport {changeNpmrc} from '@helpers/actions/init/change-npmrc';\nimport {downloadTemplate} from '@helpers/fetch';\nimport {fixPnpm} from '@helpers/fix';\nimport {checkInitOptions} from '@helpers/init';\nimport {getPackageManagerInfo} from '@helpers/utils';\nimport {selectClack, taskClack, textClack} from 'src/prompts/clack';\nimport {resolver} from 'src/scripts/path';\n\nimport {ROOT} from '../../src/constants/path';\nimport {\n  APP_DIR,\n  APP_NAME,\n  APP_REPO,\n  LARAVEL_DIR,\n  LARAVEL_NAME,\n  LARAVEL_REPO,\n  PAGES_DIR,\n  PAGES_NAME,\n  PAGES_REPO,\n  REMIX_DIR,\n  REMIX_NAME,\n  REMIX_REPO,\n  VITE_DIR,\n  VITE_NAME,\n  VITE_REPO\n} from '../../src/constants/templates';\n\nexport interface InitActionOptions {\n  template?: 'app' | 'pages' | 'vite' | 'remix' | 'laravel';\n  package?: Agent;\n}\n\nexport const templatesMap: Record<Required<InitActionOptions>['template'], string> = {\n  app: APP_NAME,\n  laravel: LARAVEL_NAME,\n  pages: PAGES_NAME,\n  remix: REMIX_NAME,\n  vite: VITE_NAME\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\ndeclare let _exhaustiveCheck: never;\n\nexport async function initAction(_projectName: string, options: InitActionOptions) {\n  const {package: _package = 'npm', template: _template} = options;\n\n  /** ======================== Check invalid options ======================== */\n  checkInitOptions(_template, _package);\n\n  /** ======================== Welcome title ======================== */\n  p.intro(chalk.cyanBright('Create a new project'));\n\n  /** ======================== Get the init info ======================== */\n  const {packageName, projectName, template} = await getTableInfo(\n    _package,\n    _projectName,\n    _template\n  );\n  const {run} = getPackageManagerInfo(packageName);\n\n  /** ======================== Generate template ======================== */\n  // Detect if the project name already exists\n  if (existsSync(resolver(`${ROOT}/${projectName}`))) {\n    p.cancel(`The project name ${chalk.redBright(projectName)} already exists`);\n    process.exit(1);\n  }\n\n  if (template === 'app') {\n    await generateTemplate(APP_REPO);\n    renameTemplate(APP_DIR, projectName);\n  } else if (template === 'pages') {\n    await generateTemplate(PAGES_REPO);\n    renameTemplate(PAGES_DIR, projectName);\n  } else if (template === 'vite') {\n    await generateTemplate(VITE_REPO);\n    renameTemplate(VITE_DIR, projectName);\n  } else if (template === 'remix') {\n    await generateTemplate(REMIX_REPO);\n    renameTemplate(REMIX_DIR, projectName);\n  } else if (template === 'laravel') {\n    await generateTemplate(LARAVEL_REPO);\n    renameTemplate(LARAVEL_DIR, projectName);\n  } else {\n    // If add new template and not update this template, it will be exhaustive check error\n    _exhaustiveCheck = template;\n  }\n\n  const npmrcFile = resolver(`${ROOT}/${projectName}/.npmrc`);\n\n  /** ======================== Change default npmrc content ======================== */\n  changeNpmrc(npmrcFile);\n\n  /** ======================== Pnpm setup (optional) ======================== */\n  if (packageName === 'pnpm') {\n    fixPnpm(npmrcFile, true, false, ({message}) => {\n      p.log.message(message);\n    });\n  }\n\n  /** ======================== Add guide ======================== */\n  p.note(\n    `cd ${chalk.cyanBright(projectName)}\\n${chalk.cyanBright(packageName)} install`,\n    'Next steps'\n  );\n\n  p.outro(` Get started with ${chalk.cyanBright(`${packageName} ${run} dev`)}`);\n\n  process.exit(0);\n}\n\n/** ======================== Helper function ======================== */\nasync function generateTemplate(url: string) {\n  await taskClack({\n    failText: 'Template creation failed',\n    successText: 'Template created successfully!',\n    task: downloadTemplate(ROOT, url),\n    text: 'Creating template...'\n  });\n}\n\nfunction renameTemplate(originName: string, projectName: string) {\n  try {\n    renameSync(join(ROOT, originName), join(ROOT, projectName));\n  } catch (error) {\n    if (error) {\n      p.cancel(`rename Error: ${error}`);\n      process.exit(0);\n    }\n  }\n}\n\nexport type GenerateOptions<T, Last = GetUnionLastValue<T>> = [T] extends [never]\n  ? []\n  : [\n      ...GenerateOptions<Exclude<T, Last>>,\n      {\n        label: string;\n        value: Last;\n        hint: string;\n      }\n    ];\n\nasync function getTableInfo(packageName?: string, projectName?: string, template?: string) {\n  const options: GenerateOptions<Exclude<InitActionOptions['template'], undefined>> = [\n    {\n      hint: 'A Next.js 15 with app directory template pre-configured with HeroUI (v2) and Tailwind CSS.',\n      label: 'App',\n      value: 'app'\n    },\n    {\n      hint: 'A Next.js 15 with pages directory template pre-configured with HeroUI (v2) and Tailwind CSS.',\n      label: 'Pages',\n      value: 'pages'\n    },\n    {\n      hint: 'A Vite template pre-configured with HeroUI (v2) and Tailwind CSS.',\n      label: 'Vite',\n      value: 'vite'\n    },\n    {\n      hint: 'A Remix template pre-configured with HeroUI (v2) and Tailwind CSS.',\n      label: 'Remix',\n      value: 'remix'\n    },\n    {\n      hint: 'A Laravel template pre-configured with HeroUI (v2) and Tailwind CSS.',\n      label: 'Laravel',\n      value: 'laravel'\n    }\n  ];\n\n  template = (await selectClack({\n    initialValue: template,\n    message: 'Select a template (Enter to select)',\n    options\n  })) as string;\n\n  projectName = (await textClack({\n    initialValue: projectName ?? templatesMap[template],\n    message: 'New project name (Enter to skip with default name)',\n    placeholder: projectName ?? templatesMap[template]\n  })) as string;\n\n  packageName = (await selectClack({\n    initialValue: packageName,\n    message: 'Select a package manager (Enter to select)',\n    options: [\n      {\n        label: chalk.gray('npm'),\n        value: 'npm'\n      },\n      {\n        label: chalk.gray('yarn'),\n        value: 'yarn'\n      },\n      {\n        label: chalk.gray('pnpm'),\n        value: 'pnpm'\n      },\n      {\n        label: chalk.gray('bun'),\n        value: 'bun'\n      }\n    ]\n  })) as Agent;\n\n  return {\n    packageName: packageName as Agent,\n    projectName,\n    template: template as Exclude<InitActionOptions['template'], undefined>\n  };\n}\n","import {writeFileSync} from 'node:fs';\n\nconst DEFAULT_NPMRC_CONTENT = `package-lock=true`;\n\n/**\n * Change the npmrc file to the default content\n * Currently it is using `package-lock=false` which won't generate the lockfile\n */\nexport function changeNpmrc(npmrcFile: string) {\n  writeFileSync(npmrcFile, DEFAULT_NPMRC_CONTENT, 'utf-8');\n}\n","import type {SAFE_ANY} from './type';\n\nimport {type InitActionOptions, templatesMap} from 'src/actions/init-action';\n\nimport {AGENTS, type Agent} from './detect';\nimport {printMostMatchText} from './math-diff';\n\nexport function checkInitOptions(template: InitActionOptions['template'], agent: Agent) {\n  if (template) {\n    if (!Object.keys(templatesMap).includes(template)) {\n      printMostMatchText(Object.keys(templatesMap), template);\n    }\n  }\n  if (agent) {\n    if (!AGENTS.includes(agent)) {\n      printMostMatchText(AGENTS as SAFE_ANY, agent);\n    }\n  }\n}\n","import {Logger} from '@helpers/logger';\nimport {outputComponents} from '@helpers/output-info';\nimport {getPackageInfo} from '@helpers/package';\nimport {store} from 'src/constants/store';\n\nimport {type HeroUIComponents} from '../../src/constants/component';\nimport {resolver} from '../../src/constants/path';\n\ninterface ListActionOptions {\n  remote?: boolean;\n  packagePath?: string;\n}\n\nexport async function listAction(options: ListActionOptions) {\n  const {packagePath = resolver('package.json'), remote = false} = options;\n\n  let components = store.heroUIComponents as HeroUIComponents;\n\n  try {\n    /** ======================== Get the installed components ======================== */\n    if (!remote) {\n      const {currentComponents} = await getPackageInfo(packagePath);\n\n      components = currentComponents;\n    }\n\n    if (!components.length) {\n      Logger.warn(`No HeroUI components detected in the specified package.json at: ${packagePath}`);\n\n      return;\n    }\n\n    /** ======================== Output the components ======================== */\n    remote ? outputComponents({commandName: 'list', components}) : outputComponents({components});\n  } catch (error) {\n    Logger.prefix('error', `An error occurred while attempting to list the components: ${error}`);\n  }\n\n  process.exit(0);\n}\n","/* eslint-disable no-var */\nimport type {SAFE_ANY} from '@helpers/type';\n\nimport {existsSync, readFileSync, writeFileSync} from 'node:fs';\n\nimport chalk from 'chalk';\n\nimport {checkIllegalComponents} from '@helpers/check';\nimport {detect} from '@helpers/detect';\nimport {Logger} from '@helpers/logger';\nimport {outputComponents} from '@helpers/output-info';\nimport {\n  getPackageInfo,\n  transformComponentsToPackage,\n  transformPackageDetail\n} from '@helpers/package';\nimport {removeDependencies, removeTailwind} from '@helpers/remove';\nimport {findFiles} from '@helpers/utils';\nimport {resolver} from 'src/constants/path';\nimport {\n  DOCS_PROVIDER_SETUP,\n  HERO_UI,\n  SYSTEM_UI,\n  THEME_UI,\n  pnpmRequired\n} from 'src/constants/required';\nimport {getAutocompleteMultiselect, getSelect} from 'src/prompts';\n\ninterface RemoveOptionsAction {\n  packagePath: string;\n  all?: boolean;\n  tailwindPath?: string;\n  prettier?: boolean;\n}\n\nexport async function removeAction(components: string[], options: RemoveOptionsAction) {\n  const {\n    all = false,\n    packagePath = resolver('package.json'),\n    tailwindPath = findFiles('**/tailwind.config.(j|t)s')[0]\n  } = options;\n\n  var {allDependencies, allDependenciesKeys, currentComponents} = getPackageInfo(packagePath);\n  const packageManager = await detect();\n  const prettier = options.prettier ?? allDependenciesKeys.has('prettier');\n\n  let isHeroUIAll = !!allDependencies[HERO_UI];\n\n  // If no Installed HeroUI components then exit\n  if (!currentComponents.length && !isHeroUIAll) {\n    Logger.prefix('error', `No HeroUI components detected in your package.json at: ${packagePath}`);\n\n    return;\n  }\n\n  if (all || isHeroUIAll) {\n    components = isHeroUIAll ? [HERO_UI] : currentComponents.map((component) => component.package);\n  } else if (!components.length) {\n    components = await getAutocompleteMultiselect(\n      'Select the components to remove',\n      currentComponents.map((component) => {\n        return {\n          title: component.package,\n          value: component.package\n        };\n      })\n    );\n  } else {\n    // Check if the custom input components are valid\n    if (!checkIllegalComponents(components)) {\n      return;\n    }\n\n    // Transform components to package\n    components = transformComponentsToPackage(components);\n  }\n\n  // Ask user whether need to remove these components\n  const filteredComponents = components.includes(HERO_UI)\n    ? await transformPackageDetail(components, allDependencies)\n    : currentComponents.filter((component) =>\n        components.some((c) => c.includes(component.package) || c.includes(component.name))\n      );\n\n  outputComponents({\n    components: filteredComponents,\n    message: chalk.yellowBright(' Components slated for removal:')\n  });\n\n  const isRemove = await getSelect('Confirm removal of these components:', [\n    {title: 'Yes', value: true},\n    {title: 'No', value: false}\n  ]);\n\n  if (!isRemove) {\n    // Exit the process\n    process.exit(0);\n  }\n\n  /** ======================== Step 1 Remove dependencies ======================== */\n  const removeDepList: string[] = [...components];\n  const filterComponents = currentComponents.filter((c) => !components.includes(c.package));\n\n  if (!filterComponents.length) {\n    // Remove the selected components if not components leave then remove the theme-ui and system-ui\n    allDependencies[THEME_UI] && removeDepList.push(THEME_UI);\n    allDependencies[SYSTEM_UI] && removeDepList.push(SYSTEM_UI);\n  }\n\n  await removeDependencies(removeDepList, packageManager);\n\n  /** ======================== Step 2 Remove the content ======================== */\n  // Get the new package information\n  var {allDependencies, currentComponents} = getPackageInfo(packagePath, false);\n\n  isHeroUIAll = !!allDependencies[HERO_UI];\n\n  const type: SAFE_ANY = isHeroUIAll ? 'all' : 'partial';\n\n  removeTailwind(type, {\n    currentComponents,\n    isHeroUIAll,\n    isPnpm: packageManager === 'pnpm',\n    prettier,\n    tailwindPath: tailwindPath!\n  });\n\n  /** ======================== Step 3 Remove the pnpm ======================== */\n  if (!currentComponents.length && !isHeroUIAll) {\n    if (packageManager === 'pnpm') {\n      const npmrcPath = resolver('.npmrc');\n\n      if (existsSync(npmrcPath)) {\n        let content = readFileSync(npmrcPath, 'utf-8');\n\n        content = content.replace(pnpmRequired.content, '');\n\n        Logger.newLine();\n        Logger.info('Removing specified .npmrc file content');\n\n        writeFileSync(npmrcPath, content, 'utf-8');\n      }\n    }\n\n    Logger.newLine();\n    Logger.warn(\n      `No HeroUI components remain installed. Ensure the HeroUIProvider is also removed if necessary.\\nFor more information, visit: ${DOCS_PROVIDER_SETUP}`\n    );\n  }\n\n  Logger.newLine();\n\n  Logger.success(\n    ` Successfully removed the specified HeroUI components: ${components\n      .map((c) => chalk.underline(c))\n      .join(', ')}`\n  );\n\n  process.exit(0);\n}\n","import type {Agent} from './detect';\nimport type {HeroUIComponents} from 'src/constants/component';\n\nimport {existsSync, readFileSync, writeFileSync} from 'node:fs';\n\nimport {tailwindRequired} from 'src/constants/required';\n\nimport {type CheckType, checkTailwind} from './check';\nimport {exec} from './exec';\nimport {fixTailwind} from './fix';\nimport {Logger} from './logger';\nimport {getMatchArray, replaceMatchArray} from './match';\nimport {getPackageManagerInfo} from './utils';\n\nexport async function removeDependencies(components: string[], packageManager: Agent) {\n  const {remove} = getPackageManagerInfo(packageManager);\n\n  await exec(`${packageManager} ${remove} ${components.join(' ')}`);\n\n  return;\n}\n\nexport async function removeTailwind(\n  type: CheckType,\n  options: {\n    tailwindPath?: string;\n    currentComponents: HeroUIComponents;\n    isPnpm: boolean;\n    prettier: boolean;\n    isHeroUIAll: boolean;\n  }\n) {\n  const {currentComponents, isHeroUIAll, isPnpm, prettier, tailwindPath} = options;\n\n  if (tailwindPath && !existsSync(tailwindPath)) {\n    Logger.prefix('warn', `No tailwind.config.(j|t)s found remove action skipped`);\n\n    return;\n  }\n\n  let tailwindContent = readFileSync(tailwindPath!, 'utf-8');\n  const contentMatch = getMatchArray('content', tailwindContent);\n  const pluginsMatch = getMatchArray('plugins', tailwindContent);\n\n  const insIncludeAll = contentMatch.some((c) => c.includes(tailwindRequired.content));\n\n  // Not installed HeroUI components then remove the tailwind content about heroui\n  if (!currentComponents.length && !isHeroUIAll) {\n    const index = pluginsMatch.findIndex((c) => c.includes('heroui'));\n\n    index !== -1 && pluginsMatch.splice(index, 1);\n    tailwindContent = replaceMatchArray('plugins', tailwindContent, pluginsMatch);\n\n    // Remove the import heroui content\n    tailwindContent = tailwindContent.replace(/(const|var|let|import)[\\W\\w]+?heroui.*?;\\n/, '');\n  }\n\n  // If there are already have all heroui content include then don't need to remove the content\n  if (!insIncludeAll) {\n    // Remove the heroui content\n    while (contentMatch.some((c) => c.includes('heroui'))) {\n      contentMatch.splice(\n        contentMatch.findIndex((c) => c.includes('heroui')),\n        1\n      );\n    }\n    tailwindContent = replaceMatchArray('content', tailwindContent, contentMatch);\n  }\n  //  if (!currentComponents.length && isHeroUIAll) {\n  //   const index = contentMatch.findIndex(c => c.includes('heroui'));\n\n  //   // Remove the heroui content\n  //   index !== -1 &&\n  //     contentMatch.splice(\n  //       contentMatch.indexOf('./node_modules/@heroui/theme/dist/components'),\n  //       1\n  //     );\n  //   tailwindContent = replaceMatchArray('content', tailwindContent, contentMatch);\n  // } else if (!isHeroUIAll && currentComponents.length) {\n  //   const index = contentMatch.indexOf(tailwindRequired.content);\n\n  //   // Remove the heroui content\n  //   index !== -1 && contentMatch.splice(index, 1);\n  //   tailwindContent = replaceMatchArray('content', tailwindContent, contentMatch);\n  // }\n  // Write the tailwind content\n  writeFileSync(tailwindPath!, tailwindContent, 'utf-8');\n\n  const [, ...errorInfoList] = checkTailwind(\n    type as 'partial',\n    tailwindPath!,\n    currentComponents,\n    isPnpm,\n    undefined,\n    true\n  );\n\n  fixTailwind(type, {errorInfoList, format: prettier, tailwindPath: tailwindPath!});\n\n  Logger.newLine();\n  Logger.info(`Remove the removed components tailwind content in file: ${tailwindPath}`);\n}\n","import type {AppendKeyValue} from '@helpers/type';\n\nimport fs from 'node:fs';\n\nimport {catchPnpmExec} from '@helpers/actions/upgrade/catch-pnpm-exec';\nimport {checkIllegalComponents} from '@helpers/check';\nimport {getConditionVersion} from '@helpers/condition-value';\nimport {detect} from '@helpers/detect';\nimport {exec} from '@helpers/exec';\nimport {Logger} from '@helpers/logger';\nimport {colorMatchRegex} from '@helpers/output-info';\nimport {getPackageInfo} from '@helpers/package';\nimport {setupPnpm} from '@helpers/setup';\nimport {upgrade, writeUpgradeVersion} from '@helpers/upgrade';\nimport {getColorVersion, getPackageManagerInfo, transformPeerVersion} from '@helpers/utils';\nimport {type HeroUIComponents} from 'src/constants/component';\nimport {resolver} from 'src/constants/path';\nimport {HERO_UI} from 'src/constants/required';\nimport {store} from 'src/constants/store';\nimport {getAutocompleteMultiselect, getMultiselect, getSelect} from 'src/prompts';\nimport {compareVersions} from 'src/scripts/helpers';\n\ninterface UpgradeActionOptions {\n  packagePath?: string;\n  all?: boolean;\n  major?: boolean;\n  minor?: boolean;\n  patch?: boolean;\n  write?: boolean;\n  beta?: boolean;\n}\n\ntype TransformComponent = Required<\n  AppendKeyValue<HeroUIComponents[0], 'latestVersion', string> & {isLatest: boolean}\n>;\n\nfunction betaCompareVersions(version: string, latestVersion: string, beta: boolean) {\n  // compareResult(beta, 2.1.0) = 0\n  // So we need to check if it is autoChangeTag like `beta` or `canary` and latestVersion is not match `beta` or `canary` then return false\n  // Example: `beta` Compare `2.1.0` (not latest), `beta` Compare `2.1.0-beta.0` (latest)\n  const autoChangeTag = version.match(/(^\\w+$)/)?.[1];\n\n  if (autoChangeTag) {\n    return latestVersion.includes(autoChangeTag);\n  }\n\n  const compareResult = compareVersions(version, latestVersion);\n\n  // Beta version is greater than latest version if beta is true\n  // compareResult(2.1.0, 2.1.0-beta.0) = 1\n  // Example: 2.1.0 < 2.1.0-beta.0\n  return beta && compareResult === 1 && !version.includes('beta') ? false : compareResult >= 0;\n}\n\nexport async function upgradeAction(components: string[], options: UpgradeActionOptions) {\n  const {\n    all = false,\n    beta = false,\n    packagePath = resolver('package.json'),\n    write = false\n  } = options;\n  const {allDependencies, currentComponents, dependencies, devDependencies, packageJson} =\n    getPackageInfo(packagePath, false);\n\n  const isHeroUIAll = !!allDependencies[HERO_UI];\n\n  const transformComponents: TransformComponent[] = [];\n\n  await Promise.all(\n    currentComponents.map(async (component) => {\n      const mergedVersion = await getConditionVersion(component.package);\n      const compareResult = betaCompareVersions(component.version, mergedVersion, beta);\n\n      transformComponents.push({\n        ...component,\n        isLatest: compareResult,\n        latestVersion: mergedVersion\n      });\n    })\n  );\n\n  // If no Installed HeroUI components then exit\n  if (!transformComponents.length && !isHeroUIAll) {\n    Logger.prefix('error', `No HeroUI components detected in your package.json at: ${packagePath}`);\n\n    return;\n  }\n\n  if (all) {\n    components = currentComponents.map((component) => component.package);\n  } else if (!components.length) {\n    // If have the main heroui then add\n    if (isHeroUIAll) {\n      const latestVersion = await getConditionVersion(HERO_UI);\n      const herouiData = {\n        isLatest:\n          compareVersions(latestVersion, transformPeerVersion(allDependencies[HERO_UI])) <= 0,\n        latestVersion,\n        package: HERO_UI,\n        version: transformPeerVersion(allDependencies[HERO_UI])\n      } as TransformComponent;\n\n      transformComponents.push(herouiData);\n    }\n\n    // If all package is latest then pass\n    if (transformComponents.every((component) => component.isLatest)) {\n      Logger.success(' All HeroUI packages are up to date');\n      process.exit(0);\n    }\n\n    components = await getAutocompleteMultiselect(\n      'Select the components to upgrade',\n      transformComponents.map((component) => {\n        const isUpToDate = betaCompareVersions(component.version, component.latestVersion, beta);\n\n        return {\n          disabled: isUpToDate,\n          disabledMessage: 'Already up to date',\n          title: `${component.package}${\n            isUpToDate\n              ? ''\n              : `@${component.version} -> ${getColorVersion(\n                  component.version,\n                  component.latestVersion\n                )}`\n          }`,\n          value: component.package\n        };\n      })\n    );\n  } else {\n    // Check if the components are valid\n    if (!checkIllegalComponents(components)) {\n      return;\n    }\n  }\n\n  components = components.map((c) => {\n    if (store.heroUIComponentsMap[c]?.package) {\n      return store.heroUIComponentsMap[c]!.package;\n    }\n\n    return c;\n  });\n\n  /** ======================== Upgrade ======================== */\n  const upgradeOptionList = transformComponents.filter((c) => components.includes(c.package));\n\n  let result = await upgrade({\n    all,\n    allDependencies,\n    isHeroUIAll,\n    upgradeOptionList\n  });\n  let ignoreList: string[] = [];\n  const packageManager = await detect();\n\n  if (result.length) {\n    const isExecute = await getSelect('Would you like to proceed with the upgrade?', [\n      {\n        title: 'Yes',\n        value: true\n      },\n      {\n        description: 'Select this if you wish to exclude certain packages from the upgrade',\n        title: 'No',\n        value: false\n      }\n    ]);\n\n    const {install} = getPackageManagerInfo(packageManager);\n\n    if (!isExecute) {\n      // Ask whether need to remove some package not to upgrade\n      const isNeedRemove = await getSelect(\n        'Would you like to exclude any packages from the upgrade?',\n        [\n          {\n            description: 'Select this to choose packages to exclude',\n            title: 'Yes',\n            value: true\n          },\n          {\n            description: 'Select this to proceed without excluding any packages',\n            title: 'No',\n            value: false\n          }\n        ]\n      );\n\n      if (isNeedRemove) {\n        ignoreList = await getMultiselect(\n          'Select the packages you want to exclude from the upgrade:',\n          result.map((c) => {\n            return {\n              description: `${c.version} -> ${getColorVersion(c.version, c.latestVersion)}`,\n              title: c.package,\n              value: c.package\n            };\n          })\n        );\n      }\n    }\n\n    // Remove the components that need to be ignored\n    result = result.filter((r) => {\n      return !ignoreList.some((ignore) => r.package === ignore);\n    });\n\n    if (write) {\n      // Write the upgrade version to the package file\n      writeUpgradeVersion({\n        dependencies,\n        devDependencies,\n        upgradePackageList: result\n      });\n\n      fs.writeFileSync(packagePath, JSON.stringify(packageJson, null, 2), 'utf-8');\n\n      Logger.newLine();\n      Logger.success(' Upgrade version written to package.json');\n      process.exit(0);\n    } else {\n      await catchPnpmExec(() =>\n        exec(\n          `${packageManager} ${install} ${result.reduce((acc, component, index) => {\n            return `${acc}${index === 0 ? '' : ' '}${\n              component.package\n            }@${component.latestVersion.replace(colorMatchRegex, '')}`;\n          }, '')}`\n        )\n      );\n    }\n  }\n\n  /** ======================== Setup Pnpm ======================== */\n  setupPnpm(packageManager);\n\n  Logger.newLine();\n  Logger.success(' Upgrade complete. All components are up to date.');\n\n  process.exit(0);\n}\n","import type {Agent} from './detect';\n\nimport {existsSync, writeFileSync} from 'node:fs';\n\nimport {resolver} from 'src/constants/path';\nimport {pnpmRequired} from 'src/constants/required';\n\nimport {checkPnpm} from './check';\nimport {fixPnpm} from './fix';\n\nexport async function setupPnpm(packageManager: Agent) {\n  if (packageManager === 'pnpm') {\n    const npmrcPath = resolver('.npmrc');\n\n    if (!existsSync(npmrcPath)) {\n      writeFileSync(resolver('.npmrc'), pnpmRequired.content, 'utf-8');\n    } else {\n      const [isCorrectPnpm] = checkPnpm(npmrcPath);\n\n      if (!isCorrectPnpm) {\n        fixPnpm(npmrcPath);\n      }\n    }\n  }\n}\n"]}